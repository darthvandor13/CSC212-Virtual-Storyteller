<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: NAO Virtual Storyteller ‚Äî Research Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">NAO Virtual Storyteller ‚Äî Research Project </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> </p>
<h1><a class="anchor" id="autotoc_md1"></a>
Abstract</h1>
<p>This research project explores the feasibility of integrating generative AI with the NAO humanoid robot to create a virtual storyteller designed for caregivers, educators, and professionals in assistive and therapeutic fields. Studies indicate that individuals with Autism Spectrum Disorder (ASD) often find robots more approachable and predictable than human partners, making robotic interaction a valuable tool for fostering communication and social skills. By leveraging the NAO robot‚Äôs built-in audio functionality as the primary mode of interaction, this project examines how robotics and generative AI can enhance interactive storytelling.</p>
<p>The system implementation will utilize Google Dialogflow CX to manage conversational flow and process user input, working in conjunction with a Conversational Retrieval-Augmented Generation (CoRAG) model. CoRAG enhances storytelling continuity by adapting to user choices and thematic preferences over multiple interactions. Instead of generating isolated responses, CoRAG enables the storyteller to retain user preferences and past interactions, ensuring context-aware, progressively enriching narratives. The storyteller will process verbal input‚Äîsuch as user choices, questions, and themes‚Äîto generate personalized stories set in engaging fictional worlds, including space adventures and fantasy realms.</p>
<p>Caregivers, educators, and professionals working with ASD may benefit from NAO-integrated storytelling as a tool for engagement and guided learning. By leveraging CoRAG, we aim to develop an accessible and contextually adaptive storytelling platform that fosters meaningful interaction within caregiver-supported environments. Looking ahead, we envision a future where the NAO robot‚Äôs mechanical expressiveness further enhances the storytelling experience through emotionally expressive movements, deepening engagement and immersion.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md3"></a>
Research</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
Core Research</h2>
<ol type="1">
<li><b><a href="https://www.researchgate.net/publication/369799144_A_systematic_review_of_artificial_intelligence_technologies_used_for_story_writing">A Systematic Review of Artificial Intelligence Technologies Used for Story Writing</a></b> <br  />
 <em>Fang, Xiaoxuan; Ng, Davy Tsz Kit; Leung, Jac; Chu, Samuel. (2023).</em> <br  />
 <em>Education and Information Technologies</em>. <a href="https://doi.org/10.1007/s10639-023-11741-5">https://doi.org/10.1007/s10639-023-11741-5</a> <br  />
<ul>
<li>Validates AI-driven storytelling for engagement and creativity. <br  />
</li>
<li>Supports the CoRAG (Conversational Retrieval-Augmented Generation) approach. <br  />
</li>
<li>Highlights challenges in coherence, emotion, and user engagement. <br  />
</li>
<li>Encourages human-AI collaboration ‚Äî AI assists rather than replaces.</li>
</ul>
</li>
<li><b><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC11669881/">Integrating GPT-Based AI into Virtual Patients</a></b> <br  />
 <em>Guti√©rrez Maquil√≥n R, Uhl J, Schrom-Feiertag H, Tscheligi M. (2024).</em> <br  />
 <em>JMIR Form Res.</em> <a href="https://doi.org/10.2196/58623">https://doi.org/10.2196/58623</a> <br  />
<ul>
<li>Demonstrates GPT in real-time verbal interactions. <br  />
</li>
<li>Emphasizes reducing AI response latency for better usability. <br  />
</li>
<li>Aligns with CoRAG and prompt engineering techniques. <br  />
</li>
<li>Notes the role of expressive speech and gestures.</li>
</ul>
</li>
<li><b><a href="https://arxiv.org/abs/2404.15576">Designing AI-Enabled Games for Children with Autism</a></b> <br  />
 <em>Lyu, Y.; An, P.; Zhang, H.; Katsuragawa, K.; Zhao, J. (2024).</em> <br  />
 <em>CHI 2024 Workshop</em>. arXiv:2404.15576 <br  />
<ul>
<li>Applies adaptive storytelling for emotional development. <br  />
</li>
<li>Suggests multimodal feedback via NAO‚Äôs movements. <br  />
</li>
<li>Highlights robotic integration potential.</li>
</ul>
</li>
<li><b><a href="https://arxiv.org/abs/2402.00260">Human-Mediated LLMs for Robotic Intervention</a></b> <br  />
 <em>Mishra, R.; Welch, K. C.; Popa, D. O. (2024).</em> <br  />
 arXiv:2402.00260 <br  />
<ul>
<li>LLMs generate meaningful real-time dialogue. <br  />
</li>
<li>Human-mediated AI ensures appropriateness. <br  />
</li>
<li>Discusses NAO‚Äôs speech recognition limitations and therapy potential.</li>
</ul>
</li>
<li><b><a href="https://www.mdpi.com/2076-328X/14/2/131">Robots vs Humans: Social Interaction with ASD</a></b> <br  />
 <em>Dubois-Sage, M.; Jacquet, B.; Jamet, F.; Baratgin, J. (2024).</em> <br  />
 <em>Behavioral Sciences</em>, 14(2), 131. <a href="https://doi.org/10.3390/bs14020131">https://doi.org/10.3390/bs14020131</a> <br  />
<ul>
<li>Validates robotic storytelling for ASD engagement. <br  />
</li>
<li>Suggests CoRAG enhances structured interaction. <br  />
</li>
<li>Notes ethical concerns like dependency.</li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md5"></a>
Supplemental Research</h3>
<ul>
<li><b><a href="https://doi.org/10.1016/j.rasd.2022.102092">Narrative Ability in Autism</a></b> ‚Äì Greco et al. (2022) <br  />
</li>
<li><b><a href="https://doi.org/10.1093/joc/jqae029">Can AI Tell Good Stories?</a></b> ‚Äì Chu &amp; Liu (2024) <br  />
</li>
<li><b><a href="https://doi.org/10.20944/preprints202501.2278.v1">LLMs &amp; NAO for Education</a></b> ‚Äì Fragakis et al. (2025) <br  />
</li>
<li><b><a href="https://doi.org/10.5772/intechopen.1008429">AI in Creative Writing</a></b> ‚Äì Suchy (2024) <br  />
</li>
<li><b><a href="https://www.youtube.com/watch?v=nwJsxLOilcc">A Story of Robots and Autism (YouTube)</a></b> ‚Äì 2024 <br  />
</li>
<li><b><a href="https://www.youtube.com/watch?v=lm3vE7YFsGM">Robots Teach Communication (YouTube)</a></b> ‚Äì 2024 <br  />
</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md7"></a>
Other Resources</h1>
<ul>
<li>**<a href="https://www.youtube.com/@gptars">gptars YouTube Channel</a>** <br  />
</li>
<li><b><a href="https://cloud.google.com/dialogflow/cx/docs">Conversational Agents (Dialogflow CX) documentation</a></b> ‚Äì Google Cloud <br  />
</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md9"></a>
How Our AI Storytelling Robot Works ‚Äì ChatGPT Version (Explained for Everyone) :)</h1>
<p>Imagine a robot storyteller that listens to you, understands what kind of story you want, and then tells you an engaging, AI-generated tale‚Äîall in real-time. Our project is about making that happen using a humanoid robot (NAO), AI storytelling technology (ChatGPT), and a system that connects them.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
üîπ Step 1: The User Talks to the Robot</h2>
<p>The interaction starts when a person speaks to the NAO robot‚Äîjust like talking to a smart assistant (e.g., Siri, Alexa). They might say:</p>
<p>üó£Ô∏è <em>‚ÄúTell me a story about a brave astronaut!‚Äù</em></p>
<h3><a class="anchor" id="autotoc_md11"></a>
üîπ What Happens Next?</h3>
<ul>
<li>The robot listens using its built-in microphone. <br  />
</li>
<li>The speech is converted into text (so the AI can understand it). <br  />
</li>
<li>The request is sent to our AI-powered storytelling system for processing. <br  />
</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
üîπ Step 2: Processing the Story Request</h2>
<p>Once the user‚Äôs request is received, the system figures out what kind of story to generate.</p>
<h3><a class="anchor" id="autotoc_md13"></a>
üîπ How It Works Behind the Scenes:</h3>
<ul>
<li>The request is sent to ChatGPT, an advanced AI model that can generate human-like text. <br  />
</li>
<li>ChatGPT creates a unique story based on the input. <br  />
</li>
<li>The AI structures the story so it makes sense, ensuring it‚Äôs engaging and fun. <br  />
</li>
<li>The finished story is sent back to the robot to be spoken aloud. <br  />
</li>
</ul>
<h3><a class="anchor" id="autotoc_md14"></a>
üîπ For Example:</h3>
<p>If the user asked for a space adventure, ChatGPT might generate a story about: üöÄ <em>‚ÄúCaptain Luna, a brave astronaut, who embarks on a journey to find a lost alien civilization.‚Äù</em></p>
<h2><a class="anchor" id="autotoc_md15"></a>
üîπ Step 3: The Robot Tells the Story</h2>
<p>Now that the story has been created, the robot brings it to life!</p>
<h3><a class="anchor" id="autotoc_md16"></a>
üîπ What Happens Now?</h3>
<ul>
<li>The AI-generated story is converted back into speech using the robot‚Äôs built-in voice. <br  />
</li>
<li>The robot reads the story aloud, just like a human storyteller would. <br  />
</li>
<li>If time allows, we might also make the robot move its arms, nod, or react during the story. <br  />
</li>
</ul>
<h2><a class="anchor" id="autotoc_md17"></a>
üîπ Step 4: User Interaction (Optional Future Feature)</h2>
<p>Instead of just telling one long story, the system could allow for interactive choices, where the listener gets to decide what happens next.</p>
<h3><a class="anchor" id="autotoc_md18"></a>
üîπ For Example:</h3>
<p>üó£Ô∏è *"Should Captain Luna explore the dark cave or send a drone first?"* ü§ñ The robot waits for an answer and then continues the story based on the choice.</p>
<p>*(This would take extra time to implement, so we may stick to straightforward storytelling for now!)*</p>
<h2><a class="anchor" id="autotoc_md19"></a>
üîπ What‚Äôs Needed to Make This Work?</h2>
<p>Building this system requires connecting three main components: <br  />
 1Ô∏è‚É£ <b>The NAO Robot</b> ‚Äì The physical device that listens, speaks, and interacts. <br  />
 2Ô∏è‚É£ <b>Conversational Agents (Dialogflow CX)</b> ‚Äì A system that helps manage the conversation flow and decides what should happen next. <br  />
 3Ô∏è‚É£ <b>ChatGPT API</b> ‚Äì The AI that generates the actual story. <br  />
</p>
<p>To make them work together, we need a <b>bridge**‚Äîa small program called a **webhook</b> that connects Conversational Agents (Dialogflow CX) to ChatGPT.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
üîπ How Long Will This Take?</h2>
<p>Since we‚Äôre working under a deadline, we‚Äôre focusing on the core goal: ‚úÖ Make the robot listen, generate, and tell a story smoothly. üöÄ If time allows, we‚Äôll explore adding extra features, like gestures or interactive choices.</p>
<h2><a class="anchor" id="autotoc_md21"></a>
üîπ Why This Matters</h2>
<p>This AI-powered storytelling system could be useful for <b>educators, therapists, and caregivers</b>, helping them introduce engaging, AI-generated stories in an interactive way. It also provides a hands-free, voice-activated experience, making it easy to use.</p>
<p>While this is a technical research project, it‚Äôs also about <b>bringing storytelling to life</b> using AI and robotics!</p>
<h2><a class="anchor" id="autotoc_md22"></a>
üîπ Summary: The Big Picture</h2>
<p>üîπ User speaks to the robot ‚Üí üó£Ô∏è NAO listens <br  />
 üîπ Request is sent to ChatGPT ‚Üí üí° AI generates a unique story <br  />
 üîπ Story is sent back to the robot ‚Üí ü§ñ NAO reads the story aloud <br  />
 üîπ Potential future expansion ‚Üí üîÑ Interactive choices <br  />
</p>
<hr  />
<h1><a class="anchor" id="autotoc_md24"></a>
How Our AI Storytelling System Works ‚Äì ChatGPT Version (Explained for a CS Student)</h1>
<p>This project is about integrating <b>robotics and AI</b> to create an interactive storytelling system where a humanoid robot (NAO) listens to user input, processes the request using AI (ChatGPT), and narrates a dynamically generated story.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
üîπ Core Components:</h2>
<ul>
<li><b>NAO Robot</b> ‚Üí Captures voice input and outputs speech. <br  />
</li>
<li><b>Conversational Agents (Dialogflow CX)</b> ‚Üí Manages the conversation and processes user input. <br  />
</li>
<li><b>ChatGPT API</b> ‚Üí Generates the story dynamically based on user preferences. <br  />
</li>
</ul>
<p>A <b>webhook</b> is developed to <b>bridge</b> Conversational Agents (Dialogflow CX) and ChatGPT.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
üîπ Step 1: User Input &amp; Speech Processing</h2>
<p>The interaction begins when the user talks to NAO:</p>
<p>üó£Ô∏è <em>Example: ‚ÄúTell me a story about a brave astronaut.‚Äù</em></p>
<h3><a class="anchor" id="autotoc_md27"></a>
üîπ How This Works Technically:</h3>
<ol type="1">
<li>NAO records the user‚Äôs voice and converts speech to text. <br  />
</li>
<li>The text is sent to Conversational Agents (Dialogflow CX), which classifies the intent (e.g., ‚ÄúStory Request‚Äù) and extracts parameters (e.g., ‚Äúastronaut theme‚Äù). <br  />
</li>
<li>Conversational Agents (Dialogflow CX) forwards this request to our custom webhook, which will call ChatGPT.</li>
</ol>
<h2><a class="anchor" id="autotoc_md28"></a>
üîπ Step 2: Webhook &amp; AI Story Generation</h2>
<p>The webhook is a simple backend service (<b>Python/Flask</b> or <b>Node.js</b>) that processes Conversational Agents' (Dialogflow CX) structured request and queries <b>ChatGPT‚Äôs API</b>.</p>
<h3><a class="anchor" id="autotoc_md29"></a>
üîπ Technical Breakdown:</h3>
<ul>
<li>Webhook receives a <b>JSON request</b> from Conversational Agents (Dialogflow CX). <br  />
</li>
<li>Extracts the user‚Äôs theme preference (e.g., ‚Äúastronaut adventure‚Äù). <br  />
</li>
<li>Formats the request and sends it to <b>ChatGPT‚Äôs API</b>. <br  />
</li>
<li>ChatGPT generates a structured response, returning a <b>short story</b>. <br  />
</li>
<li>Webhook parses the response and sends it back to <b>Dialogflow CX</b>.</li>
</ul>
<h4><a class="anchor" id="autotoc_md30"></a>
Example API Call to ChatGPT</h4>
<div class="fragment"><div class="line">import openai</div>
<div class="line"> </div>
<div class="line">response = openai.ChatCompletion.create(</div>
<div class="line">    model=&quot;gpt-4&quot;,</div>
<div class="line">    messages=[{&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;Tell a short astronaut adventure story.&quot;}]</div>
<div class="line">)</div>
<div class="line">print(response[&quot;choices&quot;][0][&quot;message&quot;][&quot;content&quot;])</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md31"></a>
üîπ Step 3: NAO Reads the Story Aloud</h2>
<p>Once the AI-generated story is returned, it‚Äôs sent back to <b>NAO for speech synthesis</b>.</p>
<h3><a class="anchor" id="autotoc_md32"></a>
üîπ How This Works:</h3>
<ul>
<li>The <b>formatted story text</b> is sent back to <b>Conversational Agents (Dialogflow CX)</b>. <br  />
</li>
<li>Conversational Agents (Dialogflow CX) forwards the response to <b>NAO</b>. <br  />
</li>
<li>NAO‚Äôs <b>Text-to-Speech (TTS)</b> engine converts the text to spoken words.</li>
</ul>
<h4><a class="anchor" id="autotoc_md33"></a>
Example NAO TTS Code</h4>
<div class="fragment"><div class="line">from naoqi import ALProxy</div>
<div class="line"> </div>
<div class="line">tts = ALProxy(&quot;ALTextToSpeech&quot;, &quot;&lt;NAO_IP&gt;&quot;, 9559)</div>
<div class="line">story_text = &quot;Captain Luna soared through space on a mission to find the lost alien civilization.&quot;</div>
<div class="line">tts.say(story_text)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md34"></a>
üîπ Summary of the System Flow:</h2>
<p>üîπ <b>User speaks to NAO</b> ‚Üí Speech converted to text <br  />
 üîπ <b>Conversational Agents (Dialogflow CX) processes request</b> ‚Üí Extracts story parameters <br  />
 üîπ <b>Webhook sends request to ChatGPT</b> ‚Üí AI generates a custom story <br  />
 üîπ <b>Webhook returns the story to Conversational Agents (Dialogflow CX)</b> <br  />
 üîπ <b>NAO reads the story aloud</b> using TTS</p>
<h1><a class="anchor" id="autotoc_md35"></a>
NAO Virtual Storyteller</h1>
<h2><a class="anchor" id="autotoc_md36"></a>
Project Objective</h2>
<p>This project demonstrates a <b>proof of concept</b> where a <b>NAO robot</b> serves as the expressive medium for a <b>virtual storyteller</b> powered by <b>generative AI</b>. The robot listens for spoken keywords, sends them to an OpenAI-powered story generation service, and narrates the resulting story using its onboard Text-to-Speech (TTS) engine.</p>
<p>The system is designed to be easily extensible. While this version uses keyword recognition and a simple webhook, the architecture could integrate with more robust conversation engines such as <b>Google Conversational Agents (Dialogflow CX)</b> for richer, multi-turn dialogue.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md38"></a>
Documentation &amp; Downloads</h2>
<ul>
<li><b>NAO Developer Documentation</b> <br  />
 <a href="http://doc.aldebaran.com/2-8/home_nao.html">http://doc.aldebaran.com/2-8/home_nao.html</a></li>
<li><b>NAO Software Downloads</b> <br  />
 <a href="https://aldebaran.com/en/support/kb/nao6/downloads/nao6-software-downloads/">https://aldebaran.com/en/support/kb/nao6/downloads/nao6-software-downloads/</a></li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md40"></a>
Directory Structure</h2>
<div class="fragment"><div class="line">naoqi_tests/</div>
<div class="line">‚îú‚îÄ‚îÄ chatgpt_webhook.py     # Flask-based story generation API</div>
<div class="line">‚îú‚îÄ‚îÄ test_naoqi.py          # Basic NAO connectivity test</div>
<div class="line">‚îú‚îÄ‚îÄ test_tts.py            # Simple speech playback test</div>
<div class="line">‚îú‚îÄ‚îÄ test_asr.py            # Full storyteller integration loop</div>
<div class="line">‚îú‚îÄ‚îÄ venv/                  # Python 2.7 virtual environment</div>
<div class="line">‚îî‚îÄ‚îÄ README.md              # (this file)</div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md42"></a>
Network Requirements</h2>
<p>To communicate with the NAO robot:</p><ul>
<li>Ensure both your computer and the robot are on the <b>same local subnet</b> (e.g., <code>192.168.1.X</code>).</li>
<li>Find the NAO robot‚Äôs IP via its touchscreen or audio prompt after boot.</li>
<li>Update the <code>NAO_IP</code> variable in your scripts (e.g., <code>test_asr.py</code>) to match the robot's IP.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md44"></a>
‚öôÔ∏è Setup Instructions</h2>
<h3><a class="anchor" id="autotoc_md45"></a>
1. Set Up a Python 2.7 Virtual Environment</h3>
<div class="fragment"><div class="line">sudo apt install python2.7 python2.7-venv</div>
<div class="line">mkdir -p ~/naoqi_env</div>
<div class="line">cd ~/naoqi_env</div>
<div class="line">virtualenv -p python2.7 venv</div>
<div class="line">source venv/bin/activate</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md47"></a>
2. Install Required Packages</h3>
<div class="fragment"><div class="line">pip install flask requests</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md49"></a>
3. Configure Your OpenAI API Key</h3>
<p>Add the following to your <code>~/.bashrc</code>: </p><div class="fragment"><div class="line">export AI_STORYTELLER_TEST_KEY_CV=&quot;sk-...your API key...&quot;</div>
</div><!-- fragment --><p>Apply it in your current shell: </p><div class="fragment"><div class="line">source ~/.bashrc</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md51"></a>
4. Run Tests</h3>
<h4><a class="anchor" id="autotoc_md52"></a>
üî∏ Verify NAO Connectivity</h4>
<div class="fragment"><div class="line">python2 test_naoqi.py</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md53"></a>
üî∏ Confirm NAO Can Speak</h4>
<div class="fragment"><div class="line">python2 test_tts.py</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md54"></a>
üî∏ Start the Flask Story Generator Webhook</h4>
<div class="fragment"><div class="line">python2 chatgpt_webhook.py</div>
</div><!-- fragment --><p>Then, test it with:</p>
<div class="fragment"><div class="line">curl -X POST http://localhost:5000/generate_story \</div>
<div class="line">     -H &quot;Content-Type: application/json&quot; \</div>
<div class="line">     -d &#39;{&quot;word&quot;: &quot;robot&quot;}&#39;</div>
</div><!-- fragment --><hr  />
<h3><a class="anchor" id="autotoc_md56"></a>
5. Run the Virtual Storyteller</h3>
<div class="fragment"><div class="line">python2 test_asr.py</div>
</div><!-- fragment --><p>Then speak one of the following words near NAO:</p><ul>
<li><code>hello</code></li>
<li><code>story</code></li>
<li><code>robot</code></li>
</ul>
<p>The system will:</p><ol type="1">
<li>Recognize your spoken keyword using NAO‚Äôs ASR.</li>
<li>Send it to the Flask server.</li>
<li>Generate a short story using the OpenAI API.</li>
<li>Speak the story aloud using NAO‚Äôs built-in speakers.</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md58"></a>
Internals</h2>
<p>This project uses:</p><ul>
<li><code>ALSpeechRecognition</code> for listening</li>
<li><code>ALMemory</code> for retrieving recognized words</li>
<li><code>ALTextToSpeech</code> for playback</li>
<li>Flask (<code>chatgpt_webhook.py</code>) to serve <code>/generate_story</code></li>
<li>OpenAI‚Äôs <code>chat/completions</code> API with the model <code>gpt-4o-mini</code></li>
</ul>
<p>For technical reference, all scripts have been refactored for <a href="https://www.doxygen.nl/">Doxygen</a> compatibility with documented parameters, types, and call graphs.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md60"></a>
Scripts Overview</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">File   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test_naoqi.py</code>   </td><td class="markdownTableBodyNone">Verifies connection to the NAO robot and TTS subsystem    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>test_tts.py</code>   </td><td class="markdownTableBodyNone">Sends a single test sentence to the NAO for speech    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>chatgpt_webhook.py</code>   </td><td class="markdownTableBodyNone">Flask server that generates stories using OpenAI    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>test_asr.py</code>   </td><td class="markdownTableBodyNone">End-to-end: speech ‚Üí story generation ‚Üí TTS playback   </td></tr>
</table>
<hr  />
<h2><a class="anchor" id="autotoc_md62"></a>
Future Possibilities</h2>
<p>This setup validates the feasibility of <b>using NAO as a front-end for a generative AI-based virtual storyteller</b>. With this foundation, the following enhancements are possible:</p><ul>
<li>Integrating <b>Conversational Agents (Dialogflow CX)</b> to manage conversation logic.</li>
<li>Adding <b>multi-turn story generation</b> with memory of previous interactions.</li>
<li>Expanding vocabulary dynamically via the web interface.</li>
<li>Hosting the webhook on a public domain via <code>ngrok</code> or GCP/AWS.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md64"></a>
License</h2>
<p>MIT License ‚Äî See source files for copyright.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md66"></a>
Questions or Contributions?</h2>
<p>Feel free to fork this repo, submit pull requests, or open an issue with suggestions for enhancements!</p>
<hr  />
<h2><a class="anchor" id="autotoc_md68"></a>
üßæ Developer Reference (Doxygen)</h2>
<p>This repository includes full developer-level documentation using <a href="https://www.doxygen.nl/">Doxygen</a>. All Python source files are annotated with:</p>
<ul>
<li><code>@file</code>, <code>@brief</code>, <code>@param</code>, <code>@return</code>, <code>@author</code></li>
<li>Function-level docstrings structured for auto-generation</li>
<li>Mermaid diagrams (e.g., ASR ‚Üí Webhook ‚Üí TTS flowchart in <code>test_asr.py</code>)</li>
<li>Module constants and environmental variable documentation</li>
</ul>
<h3><a class="anchor" id="autotoc_md69"></a>
Entry Points</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Script   </th><th class="markdownTableHeadNone">Purpose    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test_asr.py</code>   </td><td class="markdownTableBodyNone">Speech input ‚Üí OpenAI webhook ‚Üí TTS output    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>chatgpt_webhook.py</code>   </td><td class="markdownTableBodyNone">Flask server to generate stories via OpenAI API    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test_naoqi.py</code>   </td><td class="markdownTableBodyNone">Connectivity check to NAO‚Äôs <code>ALTextToSpeech</code> proxy    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>test_tts.py</code>   </td><td class="markdownTableBodyNone">Basic smoke test of NAO‚Äôs speech output   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md70"></a>
To Generate Documentation</h3>
<p>To build the Doxygen HTML output:</p>
<div class="fragment"><div class="line">doxygen Doxyfile</div>
</div><!-- fragment --><p>Then open the generated file:</p>
<div class="fragment"><div class="line">xdg-open docs/html/index.html</div>
</div><!-- fragment --><p>This will give you a full class/function reference, parameter table, call graphs, and links between modules.</p>
<blockquote class="doxtable">
<p><b>Note</b>: Ensure your <code>Doxyfile</code> is configured for Python with <code>OPTIMIZE_OUTPUT_FOR_C = NO</code> and <code>EXTENSION_MAPPING = py=Python</code>. </p>
</blockquote>
<p>‚ÑπÔ∏è <b>Browse the full documentation here ‚Üí</b> <a href="https://darthvandor13.github.io/CSC212-Virtual-Storyteller/">github.io/CSC212-Virtual-Storyteller</a> </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
