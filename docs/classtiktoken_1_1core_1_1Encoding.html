<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: tiktoken.core.Encoding Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetiktoken.html">tiktoken</a></li><li class="navelem"><a class="el" href="namespacetiktoken_1_1core.html">core</a></li><li class="navelem"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html">Encoding</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classtiktoken_1_1core_1_1Encoding-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">tiktoken.core.Encoding Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af160875b0ba3002c57cd8f267643690b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#af160875b0ba3002c57cd8f267643690b">__init__</a> (self, str <a class="el" href="classtiktoken_1_1core_1_1Encoding.html#ae29bbbc7915830538d4103fb4cc08415">name</a>, *str pat_str, dict[bytes, int] mergeable_ranks, dict[str, int] special_tokens, int|None explicit_n_vocab=None)</td></tr>
<tr class="separator:af160875b0ba3002c57cd8f267643690b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe29a846533bfc0fc93ccc6f5ae9a64f"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#afe29a846533bfc0fc93ccc6f5ae9a64f">__repr__</a> (self)</td></tr>
<tr class="separator:afe29a846533bfc0fc93ccc6f5ae9a64f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf2b1f68b2e0d0cc199b6536cb051a6f"><td class="memItemLeft" align="right" valign="top">list[int]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#abf2b1f68b2e0d0cc199b6536cb051a6f">encode_ordinary</a> (self, str text)</td></tr>
<tr class="separator:abf2b1f68b2e0d0cc199b6536cb051a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6d4cb3e495bdc74f9c9e58c93d2a2fa"><td class="memItemLeft" align="right" valign="top">list[int]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#ac6d4cb3e495bdc74f9c9e58c93d2a2fa">encode</a> (self, str text, *Literal[&quot;all&quot;]|AbstractSet[str] allowed_special=set(), Literal[&quot;all&quot;]|Collection[str] disallowed_special=&quot;all&quot;)</td></tr>
<tr class="separator:ac6d4cb3e495bdc74f9c9e58c93d2a2fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7717815723ee3dbe2b58360a277f0b35"><td class="memItemLeft" align="right" valign="top">npt.NDArray[np.uint32]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a7717815723ee3dbe2b58360a277f0b35">encode_to_numpy</a> (self, str text, *Literal[&quot;all&quot;]|AbstractSet[str] allowed_special=set(), Literal[&quot;all&quot;]|Collection[str] disallowed_special=&quot;all&quot;)</td></tr>
<tr class="separator:a7717815723ee3dbe2b58360a277f0b35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27253d197aa7e70c520648bb454fdcc"><td class="memItemLeft" align="right" valign="top">list[list[int]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#aa27253d197aa7e70c520648bb454fdcc">encode_ordinary_batch</a> (self, list[str] text, *int num_threads=8)</td></tr>
<tr class="separator:aa27253d197aa7e70c520648bb454fdcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3525b0fe3ffe92b7917216fc6c125112"><td class="memItemLeft" align="right" valign="top">list[list[int]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a3525b0fe3ffe92b7917216fc6c125112">encode_batch</a> (self, list[str] text, *int num_threads=8, Literal[&quot;all&quot;]|AbstractSet[str] allowed_special=set(), Literal[&quot;all&quot;]|Collection[str] disallowed_special=&quot;all&quot;)</td></tr>
<tr class="separator:a3525b0fe3ffe92b7917216fc6c125112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa0e4de1c901a526c41055365a5e1c98"><td class="memItemLeft" align="right" valign="top">tuple[list[int], list[list[int]]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#aaa0e4de1c901a526c41055365a5e1c98">encode_with_unstable</a> (self, str text, *Literal[&quot;all&quot;]|AbstractSet[str] allowed_special=set(), Literal[&quot;all&quot;]|Collection[str] disallowed_special=&quot;all&quot;)</td></tr>
<tr class="separator:aaa0e4de1c901a526c41055365a5e1c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d104c4f4b5dfcf5c11a5a231f9aa2e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a2d104c4f4b5dfcf5c11a5a231f9aa2e6">encode_single_token</a> (self, str|bytes text_or_bytes)</td></tr>
<tr class="separator:a2d104c4f4b5dfcf5c11a5a231f9aa2e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afce106ab034d578bf0fb32eec5069390"><td class="memItemLeft" align="right" valign="top">bytes&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#afce106ab034d578bf0fb32eec5069390">decode_bytes</a> (self, Sequence[int] tokens)</td></tr>
<tr class="separator:afce106ab034d578bf0fb32eec5069390"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10561470f4d6edcbd18724ecfa663898"><td class="memItemLeft" align="right" valign="top">str&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a10561470f4d6edcbd18724ecfa663898">decode</a> (self, Sequence[int] tokens, str errors=&quot;replace&quot;)</td></tr>
<tr class="separator:a10561470f4d6edcbd18724ecfa663898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280acc20de031cca4470ea7b39814eab"><td class="memItemLeft" align="right" valign="top">bytes&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a280acc20de031cca4470ea7b39814eab">decode_single_token_bytes</a> (self, int token)</td></tr>
<tr class="separator:a280acc20de031cca4470ea7b39814eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4f093e6d385d0ec88b1b2aeb559c9d1"><td class="memItemLeft" align="right" valign="top">list[bytes]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#ad4f093e6d385d0ec88b1b2aeb559c9d1">decode_tokens_bytes</a> (self, Sequence[int] tokens)</td></tr>
<tr class="separator:ad4f093e6d385d0ec88b1b2aeb559c9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b6582c472003f462c0c7c89df3f6f37"><td class="memItemLeft" align="right" valign="top">tuple[str, list[int]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a7b6582c472003f462c0c7c89df3f6f37">decode_with_offsets</a> (self, Sequence[int] tokens)</td></tr>
<tr class="separator:a7b6582c472003f462c0c7c89df3f6f37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04a37b67b4434f319ce93c2081b0c45f"><td class="memItemLeft" align="right" valign="top">list[str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a04a37b67b4434f319ce93c2081b0c45f">decode_batch</a> (self, Sequence[Sequence[int]] batch, *str errors=&quot;replace&quot;, int num_threads=8)</td></tr>
<tr class="separator:a04a37b67b4434f319ce93c2081b0c45f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c6aabc923caf6d27a5c4b77e8b3ba2"><td class="memItemLeft" align="right" valign="top">list[bytes]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#ad1c6aabc923caf6d27a5c4b77e8b3ba2">decode_bytes_batch</a> (self, Sequence[Sequence[int]] batch, *int num_threads=8)</td></tr>
<tr class="separator:ad1c6aabc923caf6d27a5c4b77e8b3ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843feac021287e204cb3b85b95ca0a65"><td class="memItemLeft" align="right" valign="top">list[bytes]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a843feac021287e204cb3b85b95ca0a65">token_byte_values</a> (self)</td></tr>
<tr class="separator:a843feac021287e204cb3b85b95ca0a65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e9019dcd87fe99c6a2cfcd7e762df88"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a8e9019dcd87fe99c6a2cfcd7e762df88">eot_token</a> (self)</td></tr>
<tr class="separator:a8e9019dcd87fe99c6a2cfcd7e762df88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab219a9a5978b2e21e8c11632a5d28942"><td class="memItemLeft" align="right" valign="top">set[str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#ab219a9a5978b2e21e8c11632a5d28942">special_tokens_set</a> (self)</td></tr>
<tr class="separator:ab219a9a5978b2e21e8c11632a5d28942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c46575bc57ed4448d7dc5a6a0b4369"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a17c46575bc57ed4448d7dc5a6a0b4369">is_special_token</a> (self, int token)</td></tr>
<tr class="separator:a17c46575bc57ed4448d7dc5a6a0b4369"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7707c4a8c01355b460a33396082770f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a7707c4a8c01355b460a33396082770f5">n_vocab</a> (self)</td></tr>
<tr class="separator:a7707c4a8c01355b460a33396082770f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a98f07985a10aced55dc7adff0da94b"><td class="memItemLeft" align="right" valign="top">object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a7a98f07985a10aced55dc7adff0da94b">__getstate__</a> (self)</td></tr>
<tr class="separator:a7a98f07985a10aced55dc7adff0da94b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dfc82c7c1862f6372b57e93129c1bba"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#a2dfc82c7c1862f6372b57e93129c1bba">__setstate__</a> (self, object value)</td></tr>
<tr class="separator:a2dfc82c7c1862f6372b57e93129c1bba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae29bbbc7915830538d4103fb4cc08415"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#ae29bbbc7915830538d4103fb4cc08415">name</a></td></tr>
<tr class="separator:ae29bbbc7915830538d4103fb4cc08415"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa232fd73df3264ff795f07648a267af2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtiktoken_1_1core_1_1Encoding.html#aa232fd73df3264ff795f07648a267af2">max_token_value</a></td></tr>
<tr class="separator:aa232fd73df3264ff795f07648a267af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af160875b0ba3002c57cd8f267643690b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af160875b0ba3002c57cd8f267643690b">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def tiktoken.core.Encoding.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*str&#160;</td>
          <td class="paramname"><em>pat_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict[bytes, int]&#160;</td>
          <td class="paramname"><em>mergeable_ranks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict[str, int]&#160;</td>
          <td class="paramname"><em>special_tokens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int | None &#160;</td>
          <td class="paramname"><em>explicit_n_vocab</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates an Encoding object.

See openai_public.py for examples of how to construct an Encoding object.

Args:
    name: The name of the encoding. It should be clear from the name of the encoding
        what behaviour to expect, in particular, encodings with different special tokens
        should have different names.
    pat_str: A regex pattern string that is used to split the input text.
    mergeable_ranks: A dictionary mapping mergeable token bytes to their ranks. The ranks
        must correspond to merge priority.
    special_tokens: A dictionary mapping special token strings to their token values.
    explicit_n_vocab: The number of tokens in the vocabulary. If provided, it is checked
        that the number of mergeable tokens and special tokens is equal to this number.
</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a7a98f07985a10aced55dc7adff0da94b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a98f07985a10aced55dc7adff0da94b">&#9670;&nbsp;</a></span>__getstate__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> object tiktoken.core.Encoding.__getstate__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afe29a846533bfc0fc93ccc6f5ae9a64f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe29a846533bfc0fc93ccc6f5ae9a64f">&#9670;&nbsp;</a></span>__repr__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> str tiktoken.core.Encoding.__repr__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2dfc82c7c1862f6372b57e93129c1bba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dfc82c7c1862f6372b57e93129c1bba">&#9670;&nbsp;</a></span>__setstate__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None tiktoken.core.Encoding.__setstate__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">object&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a10561470f4d6edcbd18724ecfa663898"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10561470f4d6edcbd18724ecfa663898">&#9670;&nbsp;</a></span>decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> str tiktoken.core.Encoding.decode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[int]&#160;</td>
          <td class="paramname"><em>tokens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str &#160;</td>
          <td class="paramname"><em>errors</em> = <code>&quot;replace&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decodes a list of tokens into a string.

WARNING: the default behaviour of this function is lossy, since decoded bytes are not
guaranteed to be valid UTF-8. You can control this behaviour using the `errors` parameter,
for instance, setting `errors=strict`.

```
&gt;&gt;&gt; enc.decode([31373, 995])
'hello world'
```
</pre> 
</div>
</div>
<a id="a04a37b67b4434f319ce93c2081b0c45f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04a37b67b4434f319ce93c2081b0c45f">&#9670;&nbsp;</a></span>decode_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[str] tiktoken.core.Encoding.decode_batch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[Sequence[int]]&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*str &#160;</td>
          <td class="paramname"><em>errors</em> = <code>&quot;replace&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &#160;</td>
          <td class="paramname"><em>num_threads</em> = <code>8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decodes a batch (list of lists of tokens) into a list of strings.</pre> 
</div>
</div>
<a id="afce106ab034d578bf0fb32eec5069390"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afce106ab034d578bf0fb32eec5069390">&#9670;&nbsp;</a></span>decode_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bytes tiktoken.core.Encoding.decode_bytes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[int]&#160;</td>
          <td class="paramname"><em>tokens</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decodes a list of tokens into bytes.

```
&gt;&gt;&gt; enc.decode_bytes([31373, 995])
b'hello world'
```
</pre> 
</div>
</div>
<a id="ad1c6aabc923caf6d27a5c4b77e8b3ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c6aabc923caf6d27a5c4b77e8b3ba2">&#9670;&nbsp;</a></span>decode_bytes_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[bytes] tiktoken.core.Encoding.decode_bytes_batch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[Sequence[int]]&#160;</td>
          <td class="paramname"><em>batch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*int &#160;</td>
          <td class="paramname"><em>num_threads</em> = <code>8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decodes a batch (list of lists of tokens) into a list of bytes.</pre> 
</div>
</div>
<a id="a280acc20de031cca4470ea7b39814eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a280acc20de031cca4470ea7b39814eab">&#9670;&nbsp;</a></span>decode_single_token_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bytes tiktoken.core.Encoding.decode_single_token_bytes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decodes a token into bytes.

NOTE: this will decode all special tokens.

Raises `KeyError` if the token is not in the vocabulary.

```
&gt;&gt;&gt; enc.decode_single_token_bytes(31373)
b'hello'
```
</pre> 
</div>
</div>
<a id="ad4f093e6d385d0ec88b1b2aeb559c9d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4f093e6d385d0ec88b1b2aeb559c9d1">&#9670;&nbsp;</a></span>decode_tokens_bytes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[bytes] tiktoken.core.Encoding.decode_tokens_bytes </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[int]&#160;</td>
          <td class="paramname"><em>tokens</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decodes a list of tokens into a list of bytes.

Useful for visualising tokenisation.
&gt;&gt;&gt; enc.decode_tokens_bytes([31373, 995])
[b'hello', b' world']
</pre> 
</div>
</div>
<a id="a7b6582c472003f462c0c7c89df3f6f37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b6582c472003f462c0c7c89df3f6f37">&#9670;&nbsp;</a></span>decode_with_offsets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[str, list[int]] tiktoken.core.Encoding.decode_with_offsets </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[int]&#160;</td>
          <td class="paramname"><em>tokens</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Decodes a list of tokens into a string and a list of offsets.

Each offset is the index into text corresponding to the start of each token.
If UTF-8 character boundaries do not line up with token boundaries, the offset is the index
of the first character that contains bytes from the token.

This will currently raise if given tokens that decode to invalid UTF-8; this behaviour may
change in the future to be more permissive.

&gt;&gt;&gt; enc.decode_with_offsets([31373, 995])
('hello world', [0, 5])
</pre> 
</div>
</div>
<a id="ac6d4cb3e495bdc74f9c9e58c93d2a2fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6d4cb3e495bdc74f9c9e58c93d2a2fa">&#9670;&nbsp;</a></span>encode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[int] tiktoken.core.Encoding.encode </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*Literal[&quot;all&quot;] | AbstractSet[str] &#160;</td>
          <td class="paramname"><em>allowed_special</em> = <code>set()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Literal[&quot;all&quot;] | Collection[str] &#160;</td>
          <td class="paramname"><em>disallowed_special</em> = <code>&quot;all&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Encodes a string into tokens.

Special tokens are artificial tokens used to unlock capabilities from a model,
such as fill-in-the-middle. So we want to be careful about accidentally encoding special
tokens, since they can be used to trick a model into doing something we don't want it to do.

Hence, by default, encode will raise an error if it encounters text that corresponds
to a special token. This can be controlled on a per-token level using the `allowed_special`
and `disallowed_special` parameters. In particular:
- Setting `disallowed_special` to () will prevent this function from raising errors and
  cause all text corresponding to special tokens to be encoded as natural text.
- Setting `allowed_special` to "all" will cause this function to treat all text
  corresponding to special tokens to be encoded as special tokens.

```
&gt;&gt;&gt; enc.encode("hello world")
[31373, 995]
&gt;&gt;&gt; enc.encode("&lt;|endoftext|&gt;", allowed_special={"&lt;|endoftext|&gt;"})
[50256]
&gt;&gt;&gt; enc.encode("&lt;|endoftext|&gt;", allowed_special="all")
[50256]
&gt;&gt;&gt; enc.encode("&lt;|endoftext|&gt;")
# Raises ValueError
&gt;&gt;&gt; enc.encode("&lt;|endoftext|&gt;", disallowed_special=())
[27, 91, 437, 1659, 5239, 91, 29]
```
</pre> 
</div>
</div>
<a id="a3525b0fe3ffe92b7917216fc6c125112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3525b0fe3ffe92b7917216fc6c125112">&#9670;&nbsp;</a></span>encode_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[list[int]] tiktoken.core.Encoding.encode_batch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list[str]&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*int &#160;</td>
          <td class="paramname"><em>num_threads</em> = <code>8</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Literal[&quot;all&quot;] | AbstractSet[str] &#160;</td>
          <td class="paramname"><em>allowed_special</em> = <code>set()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Literal[&quot;all&quot;] | Collection[str] &#160;</td>
          <td class="paramname"><em>disallowed_special</em> = <code>&quot;all&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Encodes a list of strings into tokens, in parallel.

See `encode` for more details on `allowed_special` and `disallowed_special`.

```
&gt;&gt;&gt; enc.encode_batch(["hello world", "goodbye world"])
[[31373, 995], [11274, 16390, 995]]
```
</pre> 
</div>
</div>
<a id="abf2b1f68b2e0d0cc199b6536cb051a6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf2b1f68b2e0d0cc199b6536cb051a6f">&#9670;&nbsp;</a></span>encode_ordinary()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[int] tiktoken.core.Encoding.encode_ordinary </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Encodes a string into tokens, ignoring special tokens.

This is equivalent to `encode(text, disallowed_special=())` (but slightly faster).

```
&gt;&gt;&gt; enc.encode_ordinary("hello world")
[31373, 995]
</pre> 
</div>
</div>
<a id="aa27253d197aa7e70c520648bb454fdcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27253d197aa7e70c520648bb454fdcc">&#9670;&nbsp;</a></span>encode_ordinary_batch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[list[int]] tiktoken.core.Encoding.encode_ordinary_batch </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list[str]&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*int &#160;</td>
          <td class="paramname"><em>num_threads</em> = <code>8</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Encodes a list of strings into tokens, in parallel, ignoring special tokens.

This is equivalent to `encode_batch(text, disallowed_special=())` (but slightly faster).

```
&gt;&gt;&gt; enc.encode_ordinary_batch(["hello world", "goodbye world"])
[[31373, 995], [11274, 16390, 995]]
```
</pre> 
</div>
</div>
<a id="a2d104c4f4b5dfcf5c11a5a231f9aa2e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d104c4f4b5dfcf5c11a5a231f9aa2e6">&#9670;&nbsp;</a></span>encode_single_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int tiktoken.core.Encoding.encode_single_token </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str | bytes&#160;</td>
          <td class="paramname"><em>text_or_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Encodes text corresponding to a single token to its token value.

NOTE: this will encode all special tokens.

Raises `KeyError` if the token is not in the vocabulary.

```
&gt;&gt;&gt; enc.encode_single_token("hello")
31373
```
</pre> 
</div>
</div>
<a id="a7717815723ee3dbe2b58360a277f0b35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7717815723ee3dbe2b58360a277f0b35">&#9670;&nbsp;</a></span>encode_to_numpy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> npt.NDArray[np.uint32] tiktoken.core.Encoding.encode_to_numpy </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*Literal[&quot;all&quot;] | AbstractSet[str] &#160;</td>
          <td class="paramname"><em>allowed_special</em> = <code>set()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Literal[&quot;all&quot;] | Collection[str] &#160;</td>
          <td class="paramname"><em>disallowed_special</em> = <code>&quot;all&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Encodes a string into tokens, returning a numpy array.

Avoids the overhead of copying the token buffer into a Python list.
</pre> 
</div>
</div>
<a id="aaa0e4de1c901a526c41055365a5e1c98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa0e4de1c901a526c41055365a5e1c98">&#9670;&nbsp;</a></span>encode_with_unstable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> tuple[list[int], list[list[int]]] tiktoken.core.Encoding.encode_with_unstable </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*Literal[&quot;all&quot;] | AbstractSet[str] &#160;</td>
          <td class="paramname"><em>allowed_special</em> = <code>set()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Literal[&quot;all&quot;] | Collection[str] &#160;</td>
          <td class="paramname"><em>disallowed_special</em> = <code>&quot;all&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Encodes a string into stable tokens and possible completion sequences.

Note that the stable tokens will only represent a substring of `text`.

See `encode` for more details on `allowed_special` and `disallowed_special`.

This API should itself be considered unstable.

```
&gt;&gt;&gt; enc.encode_with_unstable("hello fanta")
([31373], [(277, 4910), (5113, 265), ..., (8842,)])

&gt;&gt;&gt; text = "..."
&gt;&gt;&gt; stable_tokens, completions = enc.encode_with_unstable(text)
&gt;&gt;&gt; assert text.encode().startswith(enc.decode_bytes(stable_tokens))
&gt;&gt;&gt; assert all(enc.decode_bytes(stable_tokens + seq).startswith(text.encode()) for seq in completions)
```
</pre> 
</div>
</div>
<a id="a8e9019dcd87fe99c6a2cfcd7e762df88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e9019dcd87fe99c6a2cfcd7e762df88">&#9670;&nbsp;</a></span>eot_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int tiktoken.core.Encoding.eot_token </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a17c46575bc57ed4448d7dc5a6a0b4369"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17c46575bc57ed4448d7dc5a6a0b4369">&#9670;&nbsp;</a></span>is_special_token()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> bool tiktoken.core.Encoding.is_special_token </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>token</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7707c4a8c01355b460a33396082770f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7707c4a8c01355b460a33396082770f5">&#9670;&nbsp;</a></span>n_vocab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> int tiktoken.core.Encoding.n_vocab </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">For backwards compatibility. Prefer to use `enc.max_token_value + 1`.</pre> 
</div>
</div>
<a id="ab219a9a5978b2e21e8c11632a5d28942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab219a9a5978b2e21e8c11632a5d28942">&#9670;&nbsp;</a></span>special_tokens_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> set[str] tiktoken.core.Encoding.special_tokens_set </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a843feac021287e204cb3b85b95ca0a65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a843feac021287e204cb3b85b95ca0a65">&#9670;&nbsp;</a></span>token_byte_values()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> list[bytes] tiktoken.core.Encoding.token_byte_values </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the list of all token byte values.</pre> 
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa232fd73df3264ff795f07648a267af2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa232fd73df3264ff795f07648a267af2">&#9670;&nbsp;</a></span>max_token_value</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tiktoken.core.Encoding.max_token_value</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae29bbbc7915830538d4103fb4cc08415"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae29bbbc7915830538d4103fb4cc08415">&#9670;&nbsp;</a></span>name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tiktoken.core.Encoding.name</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>py3_env/lib/python3.10/site-packages/tiktoken/<a class="el" href="py3__env_2lib_2python3_810_2site-packages_2tiktoken_2core_8py.html">core.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
