<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: sqlalchemy.ext.declarative.extensions.AbstractConcreteBase Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesqlalchemy.html">sqlalchemy</a></li><li class="navelem"><a class="el" href="namespacesqlalchemy_1_1ext.html">ext</a></li><li class="navelem"><a class="el" href="namespacesqlalchemy_1_1ext_1_1declarative.html">declarative</a></li><li class="navelem"><a class="el" href="namespacesqlalchemy_1_1ext_1_1declarative_1_1extensions.html">extensions</a></li><li class="navelem"><a class="el" href="classsqlalchemy_1_1ext_1_1declarative_1_1extensions_1_1AbstractConcreteBase.html">AbstractConcreteBase</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classsqlalchemy_1_1ext_1_1declarative_1_1extensions_1_1AbstractConcreteBase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">sqlalchemy.ext.declarative.extensions.AbstractConcreteBase Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for sqlalchemy.ext.declarative.extensions.AbstractConcreteBase:</div>
<div class="dyncontent">
<div class="center"><img src="classsqlalchemy_1_1ext_1_1declarative_1_1extensions_1_1AbstractConcreteBase__inherit__graph.png" border="0" usemap="#asqlalchemy_8ext_8declarative_8extensions_8AbstractConcreteBase_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for sqlalchemy.ext.declarative.extensions.AbstractConcreteBase:</div>
<div class="dyncontent">
<div class="center"><img src="classsqlalchemy_1_1ext_1_1declarative_1_1extensions_1_1AbstractConcreteBase__coll__graph.png" border="0" usemap="#asqlalchemy_8ext_8declarative_8extensions_8AbstractConcreteBase_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aea3bba0774d2a33c09e70ed91cb2c1a1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsqlalchemy_1_1ext_1_1declarative_1_1extensions_1_1AbstractConcreteBase.html#aea3bba0774d2a33c09e70ed91cb2c1a1">__declare_first__</a> (cls)</td></tr>
<tr class="separator:aea3bba0774d2a33c09e70ed91cb2c1a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A helper class for 'concrete' declarative mappings.

:class:`.AbstractConcreteBase` will use the :func:`.polymorphic_union`
function automatically, against all tables mapped as a subclass
to this class.   The function is called via the
``__declare_first__()`` function, which is essentially
a hook for the :meth:`.before_configured` event.

:class:`.AbstractConcreteBase` applies :class:`_orm.Mapper` for its
immediately inheriting class, as would occur for any other
declarative mapped class. However, the :class:`_orm.Mapper` is not
mapped to any particular :class:`.Table` object.  Instead, it's
mapped directly to the "polymorphic" selectable produced by
:func:`.polymorphic_union`, and performs no persistence operations on its
own.  Compare to :class:`.ConcreteBase`, which maps its
immediately inheriting class to an actual
:class:`.Table` that stores rows directly.

.. note::

    The :class:`.AbstractConcreteBase` delays the mapper creation of the
    base class until all the subclasses have been defined,
    as it needs to create a mapping against a selectable that will include
    all subclass tables.  In order to achieve this, it waits for the
    **mapper configuration event** to occur, at which point it scans
    through all the configured subclasses and sets up a mapping that will
    query against all subclasses at once.

    While this event is normally invoked automatically, in the case of
    :class:`.AbstractConcreteBase`, it may be necessary to invoke it
    explicitly after **all** subclass mappings are defined, if the first
    operation is to be a query against this base class. To do so, once all
    the desired classes have been configured, the
    :meth:`_orm.registry.configure` method on the :class:`_orm.registry`
    in use can be invoked, which is available in relation to a particular
    declarative base class::

        Base.registry.configure()

Example::

    from sqlalchemy.orm import DeclarativeBase
    from sqlalchemy.ext.declarative import AbstractConcreteBase


    class Base(DeclarativeBase):
        pass


    class Employee(AbstractConcreteBase, Base):
        pass


    class Manager(Employee):
        __tablename__ = "manager"
        employee_id = Column(Integer, primary_key=True)
        name = Column(String(50))
        manager_data = Column(String(40))

        __mapper_args__ = {
            "polymorphic_identity": "manager",
            "concrete": True,
        }


    Base.registry.configure()

The abstract base class is handled by declarative in a special way;
at class configuration time, it behaves like a declarative mixin
or an ``__abstract__`` base class.   Once classes are configured
and mappings are produced, it then gets mapped itself, but
after all of its descendants.  This is a very unique system of mapping
not found in any other SQLAlchemy API feature.

Using this approach, we can specify columns and properties
that will take place on mapped subclasses, in the way that
we normally do as in :ref:`declarative_mixins`::

    from sqlalchemy.ext.declarative import AbstractConcreteBase


    class Company(Base):
        __tablename__ = "company"
        id = Column(Integer, primary_key=True)


    class Employee(AbstractConcreteBase, Base):
        strict_attrs = True

        employee_id = Column(Integer, primary_key=True)

        @declared_attr
        def company_id(cls):
            return Column(ForeignKey("company.id"))

        @declared_attr
        def company(cls):
            return relationship("Company")


    class Manager(Employee):
        __tablename__ = "manager"

        name = Column(String(50))
        manager_data = Column(String(40))

        __mapper_args__ = {
            "polymorphic_identity": "manager",
            "concrete": True,
        }


    Base.registry.configure()

When we make use of our mappings however, both ``Manager`` and
``Employee`` will have an independently usable ``.company`` attribute::

    session.execute(select(Employee).filter(Employee.company.has(id=5)))

:param strict_attrs: when specified on the base class, "strict" attribute
 mode is enabled which attempts to limit ORM mapped attributes on the
 base class to only those that are immediately present, while still
 preserving "polymorphic" loading behavior.

 .. versionadded:: 2.0

.. seealso::

    :class:`.ConcreteBase`

    :ref:`concrete_inheritance`

    :ref:`abstract_concrete_base`</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aea3bba0774d2a33c09e70ed91cb2c1a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea3bba0774d2a33c09e70ed91cb2c1a1">&#9670;&nbsp;</a></span>__declare_first__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def sqlalchemy.ext.declarative.extensions.AbstractConcreteBase.__declare_first__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classsqlalchemy_1_1ext_1_1declarative_1_1extensions_1_1ConcreteBase.html#a72372dd09968e1ca7f0b2bef6c17594f">sqlalchemy.ext.declarative.extensions.ConcreteBase</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>py3_env/lib/python3.10/site-packages/sqlalchemy/ext/declarative/<a class="el" href="py3__env_2lib_2python3_810_2site-packages_2sqlalchemy_2ext_2declarative_2extensions_8py.html">extensions.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
