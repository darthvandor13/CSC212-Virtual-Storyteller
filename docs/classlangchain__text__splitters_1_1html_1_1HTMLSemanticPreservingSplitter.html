<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: langchain_text_splitters.html.HTMLSemanticPreservingSplitter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelangchain__text__splitters.html">langchain_text_splitters</a></li><li class="navelem"><a class="el" href="namespacelangchain__text__splitters_1_1html.html">html</a></li><li class="navelem"><a class="el" href="classlangchain__text__splitters_1_1html_1_1HTMLSemanticPreservingSplitter.html">HTMLSemanticPreservingSplitter</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classlangchain__text__splitters_1_1html_1_1HTMLSemanticPreservingSplitter-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">langchain_text_splitters.html.HTMLSemanticPreservingSplitter Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for langchain_text_splitters.html.HTMLSemanticPreservingSplitter:</div>
<div class="dyncontent">
<div class="center"><img src="classlangchain__text__splitters_1_1html_1_1HTMLSemanticPreservingSplitter__inherit__graph.png" border="0" usemap="#alangchain__text__splitters_8html_8HTMLSemanticPreservingSplitter_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for langchain_text_splitters.html.HTMLSemanticPreservingSplitter:</div>
<div class="dyncontent">
<div class="center"><img src="classlangchain__text__splitters_1_1html_1_1HTMLSemanticPreservingSplitter__coll__graph.png" border="0" usemap="#alangchain__text__splitters_8html_8HTMLSemanticPreservingSplitter_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7bb3cb5232acc354bd4200b27d069acc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain__text__splitters_1_1html_1_1HTMLSemanticPreservingSplitter.html#a7bb3cb5232acc354bd4200b27d069acc">__init__</a> (self, List[Tuple[str, str]] headers_to_split_on, *int max_chunk_size=1000, int chunk_overlap=0, Optional[List[str]] separators=None, Optional[List[str]] elements_to_preserve=None, bool preserve_links=False, bool preserve_images=False, bool preserve_videos=False, bool preserve_audio=False, Optional[Dict[str, Callable[[Any], str]]] custom_handlers=None, bool stopword_removal=False, str stopword_lang=&quot;english&quot;, bool normalize_text=False, Optional[Dict[str, str]] external_metadata=None, Optional[List[str]] allowlist_tags=None, Optional[List[str]] denylist_tags=None, bool preserve_parent_metadata=False)</td></tr>
<tr class="separator:a7bb3cb5232acc354bd4200b27d069acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a154f9dd99f7f2121534aa6b2d7fd50f7"><td class="memItemLeft" align="right" valign="top">List[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain__text__splitters_1_1html_1_1HTMLSemanticPreservingSplitter.html#a154f9dd99f7f2121534aa6b2d7fd50f7">split_text</a> (self, str text)</td></tr>
<tr class="separator:a154f9dd99f7f2121534aa6b2d7fd50f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a871e75ccd1b1a233fa4bf6d50d737996"><td class="memItemLeft" align="right" valign="top">List[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain__text__splitters_1_1html_1_1HTMLSemanticPreservingSplitter.html#a871e75ccd1b1a233fa4bf6d50d737996">transform_documents</a> (self, Sequence[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>] documents, **Any kwargs)</td></tr>
<tr class="separator:a871e75ccd1b1a233fa4bf6d50d737996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlangchain__core_1_1documents_1_1transformers_1_1BaseDocumentTransformer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlangchain__core_1_1documents_1_1transformers_1_1BaseDocumentTransformer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlangchain__core_1_1documents_1_1transformers_1_1BaseDocumentTransformer.html">langchain_core.documents.transformers.BaseDocumentTransformer</a></td></tr>
<tr class="memitem:af731b8d888cc686b8c7ccffb939a82c1 inherit pub_methods_classlangchain__core_1_1documents_1_1transformers_1_1BaseDocumentTransformer"><td class="memItemLeft" align="right" valign="top">Sequence[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain__core_1_1documents_1_1transformers_1_1BaseDocumentTransformer.html#af731b8d888cc686b8c7ccffb939a82c1">atransform_documents</a> (self, Sequence[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>] documents, **Any kwargs)</td></tr>
<tr class="separator:af731b8d888cc686b8c7ccffb939a82c1 inherit pub_methods_classlangchain__core_1_1documents_1_1transformers_1_1BaseDocumentTransformer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Split HTML content preserving semantic structure.

Splits HTML content by headers into generalized chunks, preserving semantic
structure. If chunks exceed the maximum chunk size, it uses
RecursiveCharacterTextSplitter for further splitting.

The splitter preserves full HTML elements (e.g., &lt;table&gt;, &lt;ul&gt;) and converts
links to Markdown-like links. It can also preserve images, videos, and audio
elements by converting them into Markdown format. Note that some chunks may
exceed the maximum size to maintain semantic integrity.

.. versionadded: 0.3.5

Args:
    headers_to_split_on (List[Tuple[str, str]]): HTML headers (e.g., "h1", "h2")
        that define content sections.
    max_chunk_size (int): Maximum size for each chunk, with allowance for
        exceeding this limit to preserve semantics.
    chunk_overlap (int): Number of characters to overlap between chunks to ensure
        contextual continuity.
    separators (List[str]): Delimiters used by RecursiveCharacterTextSplitter for
        further splitting.
    elements_to_preserve (List[str]): HTML tags (e.g., &lt;table&gt;, &lt;ul&gt;) to remain
        intact during splitting.
    preserve_links (bool): Converts &lt;a&gt; tags to Markdown links ([text](url)).
    preserve_images (bool): Converts &lt;img&gt; tags to Markdown images (![alt](src)).
    preserve_videos (bool): Converts &lt;video&gt; tags to Markdown
    video links (![video](src)).
    preserve_audio (bool): Converts &lt;audio&gt; tags to Markdown
    audio links (![audio](src)).
    custom_handlers (Dict[str, Callable[[Any], str]]): Optional custom handlers for
        specific HTML tags, allowing tailored extraction or processing.
    stopword_removal (bool): Optionally remove stopwords from the text.
    stopword_lang (str): The language of stopwords to remove.
    normalize_text (bool): Optionally normalize text
        (e.g., lowercasing, removing punctuation).
    external_metadata (Optional[Dict[str, str]]): Additional metadata to attach to
        the Document objects.
    allowlist_tags (Optional[List[str]]): Only these tags will be retained in
        the HTML.
    denylist_tags (Optional[List[str]]): These tags will be removed from the HTML.
    preserve_parent_metadata (bool): Whether to pass through parent document
        metadata to split documents when calling
        ``transform_documents/atransform_documents()``.

Example:
    .. code-block:: python

        from langchain_text_splitters.html import HTMLSemanticPreservingSplitter

        def custom_iframe_extractor(iframe_tag):
            ```
            Custom handler function to extract the 'src' attribute from an &lt;iframe&gt; tag.
            Converts the iframe to a Markdown-like link: [iframe:&lt;src&gt;](src).

            Args:
                iframe_tag (bs4.element.Tag): The &lt;iframe&gt; tag to be processed.

            Returns:
                str: A formatted string representing the iframe in Markdown-like format.
            ```
            iframe_src = iframe_tag.get('src', '')
            return f"[iframe:{iframe_src}]({iframe_src})"

        text_splitter = HTMLSemanticPreservingSplitter(
            headers_to_split_on=[("h1", "Header 1"), ("h2", "Header 2")],
            max_chunk_size=500,
            preserve_links=True,
            preserve_images=True,
            custom_handlers={"iframe": custom_iframe_extractor}
        )
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7bb3cb5232acc354bd4200b27d069acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bb3cb5232acc354bd4200b27d069acc">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def langchain_text_splitters.html.HTMLSemanticPreservingSplitter.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List[Tuple[str, str]]&#160;</td>
          <td class="paramname"><em>headers_to_split_on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*int &#160;</td>
          <td class="paramname"><em>max_chunk_size</em> = <code>1000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &#160;</td>
          <td class="paramname"><em>chunk_overlap</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[List[str]] &#160;</td>
          <td class="paramname"><em>separators</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[List[str]] &#160;</td>
          <td class="paramname"><em>elements_to_preserve</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>preserve_links</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>preserve_images</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>preserve_videos</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>preserve_audio</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Dict[str, Callable[[Any], str]]] &#160;</td>
          <td class="paramname"><em>custom_handlers</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>stopword_removal</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str &#160;</td>
          <td class="paramname"><em>stopword_lang</em> = <code>&quot;english&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>normalize_text</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Dict[str, str]] &#160;</td>
          <td class="paramname"><em>external_metadata</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[List[str]] &#160;</td>
          <td class="paramname"><em>allowlist_tags</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[List[str]] &#160;</td>
          <td class="paramname"><em>denylist_tags</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>preserve_parent_metadata</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initialize splitter.</pre> 
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a154f9dd99f7f2121534aa6b2d7fd50f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a154f9dd99f7f2121534aa6b2d7fd50f7">&#9670;&nbsp;</a></span>split_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> List[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>] langchain_text_splitters.html.HTMLSemanticPreservingSplitter.split_text </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Splits the provided HTML text into smaller chunks based on the configuration.

Args:
    text (str): The HTML content to be split.

Returns:
    List[Document]: A list of Document objects containing the split content.
</pre> 
</div>
</div>
<a id="a871e75ccd1b1a233fa4bf6d50d737996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a871e75ccd1b1a233fa4bf6d50d737996">&#9670;&nbsp;</a></span>transform_documents()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> List[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>] langchain_text_splitters.html.HTMLSemanticPreservingSplitter.transform_documents </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[<a class="el" href="classlangchain__core_1_1documents_1_1base_1_1Document.html">Document</a>]&#160;</td>
          <td class="paramname"><em>documents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**Any
    &#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Transform sequence of documents by splitting them.</pre> 
<p>Reimplemented from <a class="el" href="classlangchain__core_1_1documents_1_1transformers_1_1BaseDocumentTransformer.html#a6e9767f7ce04d4756e0b6c41f9aabb8b">langchain_core.documents.transformers.BaseDocumentTransformer</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>py3_env/lib/python3.10/site-packages/langchain_text_splitters/<a class="el" href="py3__env_2lib_2python3_810_2site-packages_2langchain__text__splitters_2html_8py.html">html.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
