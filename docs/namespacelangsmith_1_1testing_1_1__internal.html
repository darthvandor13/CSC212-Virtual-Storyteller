<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: langsmith.testing._internal Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelangsmith.html">langsmith</a></li><li class="navelem"><a class="el" href="namespacelangsmith_1_1testing.html">testing</a></li><li class="navelem"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html">_internal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">langsmith.testing._internal Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangsmith_1_1testing_1_1__internal_1_1SkipException.html">SkipException</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangsmith_1_1testing_1_1__internal_1_1__LangSmithTestSuite.html">_LangSmithTestSuite</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangsmith_1_1testing_1_1__internal_1_1__TestCase.html">_TestCase</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangsmith_1_1testing_1_1__internal_1_1__UTExtra.html">_UTExtra</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a20692cadfa66024645d256e012ba4134"><td class="memItemLeft" align="right" valign="top">Callable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a20692cadfa66024645d256e012ba4134">test</a> (Callable func)</td></tr>
<tr class="separator:a20692cadfa66024645d256e012ba4134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af76fa9b7fb3a4ff20c95e0e55c07064d"><td class="memItemLeft" align="right" valign="top">Callable[[Callable], Callable]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#af76fa9b7fb3a4ff20c95e0e55c07064d">test</a> (*Optional[uuid.UUID] id=None, Optional[Sequence[str]] output_keys=None, Optional[ls_client.Client] client=None, Optional[str] test_suite_name=None)</td></tr>
<tr class="separator:af76fa9b7fb3a4ff20c95e0e55c07064d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b4eb90b02c0686b6ed1a3a495cfed14"><td class="memItemLeft" align="right" valign="top">Callable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a5b4eb90b02c0686b6ed1a3a495cfed14">test</a> (*Any args, **Any kwargs)</td></tr>
<tr class="separator:a5b4eb90b02c0686b6ed1a3a495cfed14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a794502f44f35d3bd30d83fe03f737f92"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a794502f44f35d3bd30d83fe03f737f92">log_inputs</a> (dict inputs)</td></tr>
<tr class="separator:a794502f44f35d3bd30d83fe03f737f92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a322ba0e0f9aeb0d0c5be341d6f033fef"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a322ba0e0f9aeb0d0c5be341d6f033fef">log_outputs</a> (dict outputs)</td></tr>
<tr class="separator:a322ba0e0f9aeb0d0c5be341d6f033fef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a098da89e623cbc735240b8d8beee3"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#ad2a098da89e623cbc735240b8d8beee3">log_reference_outputs</a> (dict reference_outputs)</td></tr>
<tr class="separator:ad2a098da89e623cbc735240b8d8beee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a488379699b13bf185e37b73ce4b19049"><td class="memItemLeft" align="right" valign="top">None&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a488379699b13bf185e37b73ce4b19049">log_feedback</a> (Optional[Union[dict, list[dict]]] feedback=None, *str key, Optional[Union[int, bool, float]] score=None, Optional[Union[str, int, float, bool]] value=None, **Any kwargs)</td></tr>
<tr class="separator:a488379699b13bf185e37b73ce4b19049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa5f56b864b5920f98dc6663eb87caa"><td class="memItemLeft" align="right" valign="top">Generator[Optional[<a class="el" href="classlangsmith_1_1run__trees_1_1RunTree.html">run_trees.RunTree</a>], None, None]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#adfa5f56b864b5920f98dc6663eb87caa">trace_feedback</a> (*str name=&quot;Feedback&quot;)</td></tr>
<tr class="separator:adfa5f56b864b5920f98dc6663eb87caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab42d4613583373fc559851bcd857c8f0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#ab42d4613583373fc559851bcd857c8f0">SkipException</a> = pytest.skip.Exception</td></tr>
<tr class="separator:ab42d4613583373fc559851bcd857c8f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5baaa599ebfe6fdb7d1082052691c81c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a5baaa599ebfe6fdb7d1082052691c81c">logger</a> = logging.getLogger(__name__)</td></tr>
<tr class="separator:a5baaa599ebfe6fdb7d1082052691c81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a031fc21da0ccee338dc41b9e6a74a317"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a031fc21da0ccee338dc41b9e6a74a317">T</a> = TypeVar(&quot;T&quot;)</td></tr>
<tr class="separator:a031fc21da0ccee338dc41b9e6a74a317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a12e32a323d3f138cdd37dd81f91c2c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a1a12e32a323d3f138cdd37dd81f91c2c">U</a> = TypeVar(&quot;U&quot;)</td></tr>
<tr class="separator:a1a12e32a323d3f138cdd37dd81f91c2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ee6856f5b2fcce99a417d228755c605"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a7ee6856f5b2fcce99a417d228755c605">VT</a> = TypeVar(&quot;VT&quot;, bound=Optional[dict])</td></tr>
<tr class="separator:a7ee6856f5b2fcce99a417d228755c605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b4656c94d6487e8a3f3d9ba6acec8c8"><td class="memItemLeft" align="right" valign="top">Callable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a1b4656c94d6487e8a3f3d9ba6acec8c8">unit</a> = <a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a20692cadfa66024645d256e012ba4134">test</a></td></tr>
<tr class="separator:a1b4656c94d6487e8a3f3d9ba6acec8c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a488379699b13bf185e37b73ce4b19049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a488379699b13bf185e37b73ce4b19049">&#9670;&nbsp;</a></span>log_feedback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None langsmith.testing._internal.log_feedback </td>
          <td>(</td>
          <td class="paramtype">Optional[Union[dict, list[dict]]] &#160;</td>
          <td class="paramname"><em>feedback</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*str&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Union[int, bool, float]] &#160;</td>
          <td class="paramname"><em>score</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Union[str, int, float, bool]] &#160;</td>
          <td class="paramname"><em>value</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**Any&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Log run feedback from within a pytest test run.

.. warning::

    This API is in beta and might change in future versions.

Should only be used in pytest tests decorated with @pytest.mark.langsmith.

Args:
    key: Feedback name.
    score: Numerical feedback value.
    value: Categorical feedback value
    kwargs: Any other Client.create_feedback args.

Example:
    .. code-block:: python

        import pytest
        from langsmith import testing as t


        @pytest.mark.langsmith
        def test_foo() -&gt; None:
            x = 0
            y = 1
            expected = 2
            result = foo(x, y)
            t.log_feedback(key="right_type", score=isinstance(result, int))
            assert result == expected
</pre> 
</div>
</div>
<a id="a794502f44f35d3bd30d83fe03f737f92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a794502f44f35d3bd30d83fe03f737f92">&#9670;&nbsp;</a></span>log_inputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None langsmith.testing._internal.log_inputs </td>
          <td>(</td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>inputs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Log run inputs from within a pytest test run.

.. warning::

    This API is in beta and might change in future versions.

Should only be used in pytest tests decorated with @pytest.mark.langsmith.

Args:
    inputs: Inputs to log.

Example:
    .. code-block:: python

        from langsmith import testing as t


        @pytest.mark.langsmith
        def test_foo() -&gt; None:
            x = 0
            y = 1
            t.log_inputs({"x": x, "y": y})
            assert foo(x, y) == 2
</pre> 
</div>
</div>
<a id="a322ba0e0f9aeb0d0c5be341d6f033fef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322ba0e0f9aeb0d0c5be341d6f033fef">&#9670;&nbsp;</a></span>log_outputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None langsmith.testing._internal.log_outputs </td>
          <td>(</td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>outputs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Log run outputs from within a pytest test run.

.. warning::

    This API is in beta and might change in future versions.

Should only be used in pytest tests decorated with @pytest.mark.langsmith.

Args:
    outputs: Outputs to log.

Example:
    .. code-block:: python

        from langsmith import testing as t


        @pytest.mark.langsmith
        def test_foo() -&gt; None:
            x = 0
            y = 1
            result = foo(x, y)
            t.log_outputs({"foo": result})
            assert result == 2
</pre> 
</div>
</div>
<a id="ad2a098da89e623cbc735240b8d8beee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a098da89e623cbc735240b8d8beee3">&#9670;&nbsp;</a></span>log_reference_outputs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> None langsmith.testing._internal.log_reference_outputs </td>
          <td>(</td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>reference_outputs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Log example reference outputs from within a pytest test run.

.. warning::

    This API is in beta and might change in future versions.

Should only be used in pytest tests decorated with @pytest.mark.langsmith.

Args:
    outputs: Reference outputs to log.

Example:
    .. code-block:: python

        from langsmith import testing


        @pytest.mark.langsmith
        def test_foo() -&gt; None:
            x = 0
            y = 1
            expected = 2
            testing.log_reference_outputs({"foo": expected})
            assert foo(x, y) == expected
</pre> 
</div>
</div>
<a id="a5b4eb90b02c0686b6ed1a3a495cfed14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b4eb90b02c0686b6ed1a3a495cfed14">&#9670;&nbsp;</a></span>test() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable langsmith.testing._internal.test </td>
          <td>(</td>
          <td class="paramtype">*Any&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**Any&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Trace a pytest test case in LangSmith.

This decorator is used to trace a pytest test to LangSmith. It ensures
that the necessary example data is created and associated with the test function.
The decorated function will be executed as a test case, and the results will be
recorded and reported by LangSmith.

Args:
    - id (Optional[uuid.UUID]): A unique identifier for the test case. If not
        provided, an ID will be generated based on the test function's module
        and name.
    - output_keys (Optional[Sequence[str]]): A list of keys to be considered as
        the output keys for the test case. These keys will be extracted from the
        test function's inputs and stored as the expected outputs.
    - client (Optional[ls_client.Client]): An instance of the LangSmith client
        to be used for communication with the LangSmith service. If not provided,
        a default client will be used.
    - test_suite_name (Optional[str]): The name of the test suite to which the
        test case belongs. If not provided, the test suite name will be determined
        based on the environment or the package name.

Returns:
    Callable: The decorated test function.

Environment:
    - LANGSMITH_TEST_CACHE: If set, API calls will be cached to disk to
        save time and costs during testing. Recommended to commit the
        cache files to your repository for faster CI/CD runs.
        Requires the 'langsmith[vcr]' package to be installed.
    - LANGSMITH_TEST_TRACKING: Set this variable to the path of a directory
        to enable caching of test results. This is useful for re-running tests
         without re-executing the code. Requires the 'langsmith[vcr]' package.

Example:
    For basic usage, simply decorate a test function with `@pytest.mark.langsmith`.
    Under the hood this will call the `test` method:

    .. code-block:: python

        import pytest


        # Equivalently can decorate with `test` directly:
        # from langsmith import test
        # @test
        @pytest.mark.langsmith
        def test_addition():
            assert 3 + 4 == 7


    Any code that is traced (such as those traced using `@traceable`
    or `wrap_*` functions) will be traced within the test case for
    improved visibility and debugging.

    .. code-block:: python

        import pytest
        from langsmith import traceable


        @traceable
        def generate_numbers():
            return 3, 4


        @pytest.mark.langsmith
        def test_nested():
            # Traced code will be included in the test case
            a, b = generate_numbers()
            assert a + b == 7

    LLM calls are expensive! Cache requests by setting
    `LANGSMITH_TEST_CACHE=path/to/cache`. Check in these files to speed up
    CI/CD pipelines, so your results only change when your prompt or requested
    model changes.

    Note that this will require that you install langsmith with the `vcr` extra:

    `pip install -U "langsmith[vcr]"`

    Caching is faster if you install libyaml. See
    https://vcrpy.readthedocs.io/en/latest/installation.html#speed for more details.

    .. code-block:: python

        # os.environ["LANGSMITH_TEST_CACHE"] = "tests/cassettes"
        import openai
        import pytest
        from langsmith import wrappers

        oai_client = wrappers.wrap_openai(openai.Client())


        @pytest.mark.langsmith
        def test_openai_says_hello():
            # Traced code will be included in the test case
            response = oai_client.chat.completions.create(
                model="gpt-3.5-turbo",
                messages=[
                    {"role": "system", "content": "You are a helpful assistant."},
                    {"role": "user", "content": "Say hello!"},
                ],
            )
            assert "hello" in response.choices[0].message.content.lower()

    LLMs are stochastic. Naive assertions are flakey. You can use langsmith's
    `expect` to score and make approximate assertions on your results.

    .. code-block:: python

        import pytest
        from langsmith import expect


        @pytest.mark.langsmith
        def test_output_semantically_close():
            response = oai_client.chat.completions.create(
                model="gpt-3.5-turbo",
                messages=[
                    {"role": "system", "content": "You are a helpful assistant."},
                    {"role": "user", "content": "Say hello!"},
                ],
            )
            # The embedding_distance call logs the embedding distance to LangSmith
            expect.embedding_distance(
                prediction=response.choices[0].message.content,
                reference="Hello!",
                # The following optional assertion logs a
                # pass/fail score to LangSmith
                # and raises an AssertionError if the assertion fails.
            ).to_be_less_than(1.0)
            # Compute damerau_levenshtein distance
            expect.edit_distance(
                prediction=response.choices[0].message.content,
                reference="Hello!",
                # And then log a pass/fail score to LangSmith
            ).to_be_less_than(1.0)

    The `@test` decorator works natively with pytest fixtures.
    The values will populate the "inputs" of the corresponding example in LangSmith.

    .. code-block:: python

        import pytest


        @pytest.fixture
        def some_input():
            return "Some input"


        @pytest.mark.langsmith
        def test_with_fixture(some_input: str):
            assert "input" in some_input

    You can still use pytest.parametrize() as usual to run multiple test cases
    using the same test function.

    .. code-block:: python

        import pytest


        @pytest.mark.langsmith(output_keys=["expected"])
        @pytest.mark.parametrize(
            "a, b, expected",
            [
                (1, 2, 3),
                (3, 4, 7),
            ],
        )
        def test_addition_with_multiple_inputs(a: int, b: int, expected: int):
            assert a + b == expected

    By default, each test case will be assigned a consistent, unique identifier
    based on the function name and module. You can also provide a custom identifier
    using the `id` argument:

    .. code-block:: python

        import pytest
        import uuid

        example_id = uuid.uuid4()


        @pytest.mark.langsmith(id=str(example_id))
        def test_multiplication():
            assert 3 * 4 == 12

    By default, all test inputs are saved as "inputs" to a dataset.
    You can specify the `output_keys` argument to persist those keys
    within the dataset's "outputs" fields.

    .. code-block:: python

        import pytest


        @pytest.fixture
        def expected_output():
            return "input"


        @pytest.mark.langsmith(output_keys=["expected_output"])
        def test_with_expected_output(some_input: str, expected_output: str):
            assert expected_output in some_input


    To run these tests, use the pytest CLI. Or directly run the test functions.

    .. code-block:: python

        test_output_semantically_close()
        test_addition()
        test_nested()
        test_with_fixture("Some input")
        test_with_expected_output("Some input", "Some")
        test_multiplication()
        test_openai_says_hello()
        test_addition_with_multiple_inputs(1, 2, 3)
</pre> 
</div>
</div>
<a id="af76fa9b7fb3a4ff20c95e0e55c07064d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af76fa9b7fb3a4ff20c95e0e55c07064d">&#9670;&nbsp;</a></span>test() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable[[Callable], Callable] langsmith.testing._internal.test </td>
          <td>(</td>
          <td class="paramtype">*Optional[uuid.UUID] &#160;</td>
          <td class="paramname"><em>id</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Sequence[str]] &#160;</td>
          <td class="paramname"><em>output_keys</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[ls_client.Client] &#160;</td>
          <td class="paramname"><em>client</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[str] &#160;</td>
          <td class="paramname"><em>test_suite_name</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a20692cadfa66024645d256e012ba4134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20692cadfa66024645d256e012ba4134">&#9670;&nbsp;</a></span>test() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Callable langsmith.testing._internal.test </td>
          <td>(</td>
          <td class="paramtype">Callable&#160;</td>
          <td class="paramname"><em>func</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="adfa5f56b864b5920f98dc6663eb87caa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfa5f56b864b5920f98dc6663eb87caa">&#9670;&nbsp;</a></span>trace_feedback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Generator[Optional[<a class="el" href="classlangsmith_1_1run__trees_1_1RunTree.html">run_trees.RunTree</a>], None, None] langsmith.testing._internal.trace_feedback </td>
          <td>(</td>
          <td class="paramtype">*str &#160;</td>
          <td class="paramname"><em>name</em> = <code>&quot;Feedback&quot;</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Trace the computation of a pytest run feedback as its own run.

.. warning::

    This API is in beta and might change in future versions.

Args:
    name: Feedback run name. Defaults to "Feedback".

Example:
    .. code-block:: python

        import openai
        import pytest

        from langsmith import testing as t
        from langsmith import wrappers

        oai_client = wrappers.wrap_openai(openai.Client())


        @pytest.mark.langsmith
        def test_openai_says_hello():
            # Traced code will be included in the test case
            text = "Say hello!"
            response = oai_client.chat.completions.create(
                model="gpt-4o-mini",
                messages=[
                    {"role": "system", "content": "You are a helpful assistant."},
                    {"role": "user", "content": text},
                ],
            )
            t.log_inputs({"text": text})
            t.log_outputs({"response": response.choices[0].message.content})
            t.log_reference_outputs({"response": "hello!"})

            # Use this context manager to trace any steps used for generating evaluation
            # feedback separately from the main application logic
            with t.trace_feedback():
                grade = oai_client.chat.completions.create(
                    model="gpt-4o-mini",
                    messages=[
                        {
                            "role": "system",
                            "content": "Return 1 if 'hello' is in the user message and 0 otherwise.",
                        },
                        {
                            "role": "user",
                            "content": response.choices[0].message.content,
                        },
                    ],
                )
                # Make sure to log relevant feedback within the context for the
                # trace to be associated with this feedback.
                t.log_feedback(
                    key="llm_judge", score=float(grade.choices[0].message.content)
                )

            assert "hello" in response.choices[0].message.content.lower()
</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5baaa599ebfe6fdb7d1082052691c81c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5baaa599ebfe6fdb7d1082052691c81c">&#9670;&nbsp;</a></span>logger</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">langsmith.testing._internal.logger = logging.getLogger(__name__)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab42d4613583373fc559851bcd857c8f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab42d4613583373fc559851bcd857c8f0">&#9670;&nbsp;</a></span>SkipException</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlangsmith_1_1testing_1_1__internal_1_1SkipException.html">langsmith.testing._internal.SkipException</a> = pytest.skip.Exception</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a031fc21da0ccee338dc41b9e6a74a317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a031fc21da0ccee338dc41b9e6a74a317">&#9670;&nbsp;</a></span>T</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">langsmith.testing._internal.T = TypeVar(&quot;T&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1a12e32a323d3f138cdd37dd81f91c2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a12e32a323d3f138cdd37dd81f91c2c">&#9670;&nbsp;</a></span>U</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">langsmith.testing._internal.U = TypeVar(&quot;U&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1b4656c94d6487e8a3f3d9ba6acec8c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b4656c94d6487e8a3f3d9ba6acec8c8">&#9670;&nbsp;</a></span>unit</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Callable langsmith.testing._internal.unit = <a class="el" href="namespacelangsmith_1_1testing_1_1__internal.html#a20692cadfa66024645d256e012ba4134">test</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a7ee6856f5b2fcce99a417d228755c605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ee6856f5b2fcce99a417d228755c605">&#9670;&nbsp;</a></span>VT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">langsmith.testing._internal.VT = TypeVar(&quot;VT&quot;, bound=Optional[dict])</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
