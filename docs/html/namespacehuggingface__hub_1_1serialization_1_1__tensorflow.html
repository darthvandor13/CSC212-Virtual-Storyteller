<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: huggingface_hub.serialization._tensorflow Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacehuggingface__hub.html">huggingface_hub</a></li><li class="navelem"><a class="el" href="namespacehuggingface__hub_1_1serialization.html">serialization</a></li><li class="navelem"><a class="el" href="namespacehuggingface__hub_1_1serialization_1_1__tensorflow.html">_tensorflow</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">huggingface_hub.serialization._tensorflow Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aed46c312f46a4eabe8094313bf3d3f31"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classhuggingface__hub_1_1serialization_1_1__base_1_1StateDictSplit.html">StateDictSplit</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacehuggingface__hub_1_1serialization_1_1__tensorflow.html#aed46c312f46a4eabe8094313bf3d3f31">split_tf_state_dict_into_shards</a> (Dict[str, &quot;tf.Tensor&quot;] state_dict, *str filename_pattern=<a class="el" href="namespacehuggingface__hub_1_1constants.html#a02dcb2a595be83692f63765f362bc00d">constants.TF2_WEIGHTS_FILE_PATTERN</a>, Union[int, str] max_shard_size=MAX_SHARD_SIZE)</td></tr>
<tr class="separator:aed46c312f46a4eabe8094313bf3d3f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5831fa00c363c7aa8a907f6ebcb9d23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacehuggingface__hub_1_1serialization_1_1__tensorflow.html#ae5831fa00c363c7aa8a907f6ebcb9d23">get_tf_storage_size</a> (&quot;tf.Tensor&quot; tensor)</td></tr>
<tr class="separator:ae5831fa00c363c7aa8a907f6ebcb9d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae5831fa00c363c7aa8a907f6ebcb9d23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5831fa00c363c7aa8a907f6ebcb9d23">&#9670;&nbsp;</a></span>get_tf_storage_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int huggingface_hub.serialization._tensorflow.get_tf_storage_size </td>
          <td>(</td>
          <td class="paramtype">&quot;tf.Tensor&quot;&#160;</td>
          <td class="paramname"><em>tensor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aed46c312f46a4eabe8094313bf3d3f31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed46c312f46a4eabe8094313bf3d3f31">&#9670;&nbsp;</a></span>split_tf_state_dict_into_shards()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classhuggingface__hub_1_1serialization_1_1__base_1_1StateDictSplit.html">StateDictSplit</a> huggingface_hub.serialization._tensorflow.split_tf_state_dict_into_shards </td>
          <td>(</td>
          <td class="paramtype">Dict[str, &quot;tf.Tensor&quot;]&#160;</td>
          <td class="paramname"><em>state_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*str &#160;</td>
          <td class="paramname"><em>filename_pattern</em> = <code><a class="el" href="namespacehuggingface__hub_1_1constants.html#a02dcb2a595be83692f63765f362bc00d">constants.TF2_WEIGHTS_FILE_PATTERN</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Union[int, str] &#160;</td>
          <td class="paramname"><em>max_shard_size</em> = <code>MAX_SHARD_SIZE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Split a model state dictionary in shards so that each shard is smaller than a given size.

The shards are determined by iterating through the `state_dict` in the order of its keys. There is no optimization
made to make each shard as close as possible to the maximum size passed. For example, if the limit is 10GB and we
have tensors of sizes [6GB, 6GB, 2GB, 6GB, 2GB, 2GB] they will get sharded as [6GB], [6+2GB], [6+2+2GB] and not
[6+2+2GB], [6+2GB], [6GB].

&lt;Tip warning={true}&gt;

If one of the model's tensor is bigger than `max_shard_size`, it will end up in its own shard which will have a
size greater than `max_shard_size`.

&lt;/Tip&gt;

Args:
    state_dict (`Dict[str, Tensor]`):
        The state dictionary to save.
    filename_pattern (`str`, *optional*):
        The pattern to generate the files names in which the model will be saved. Pattern must be a string that
        can be formatted with `filename_pattern.format(suffix=...)` and must contain the keyword `suffix`
        Defaults to `"tf_model{suffix}.h5"`.
    max_shard_size (`int` or `str`, *optional*):
        The maximum size of each shard, in bytes. Defaults to 5GB.

Returns:
    [`StateDictSplit`]: A `StateDictSplit` object containing the shards and the index to retrieve them.
</pre> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
