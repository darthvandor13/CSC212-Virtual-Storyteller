<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: sympy.printing.glsl Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesympy.html">sympy</a></li><li class="navelem"><a class="el" href="namespacesympy_1_1printing.html">printing</a></li><li class="navelem"><a class="el" href="namespacesympy_1_1printing_1_1glsl.html">glsl</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sympy.printing.glsl Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsympy_1_1printing_1_1glsl_1_1GLSLPrinter.html">GLSLPrinter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9473e310f8fe2a3c300e4630543fab8f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesympy_1_1printing_1_1glsl.html#a9473e310f8fe2a3c300e4630543fab8f">glsl_code</a> (expr, assign_to=None, **settings)</td></tr>
<tr class="separator:a9473e310f8fe2a3c300e4630543fab8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a3844c4feaaae7ed9568bd5196f7983"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesympy_1_1printing_1_1glsl.html#a5a3844c4feaaae7ed9568bd5196f7983">print_glsl</a> (expr, **settings)</td></tr>
<tr class="separator:a5a3844c4feaaae7ed9568bd5196f7983"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a866b39145b2b2be5ec1e7ec72fedb84c"><td class="memItemLeft" align="right" valign="top">dictionary&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesympy_1_1printing_1_1glsl.html#a866b39145b2b2be5ec1e7ec72fedb84c">known_functions</a></td></tr>
<tr class="separator:a866b39145b2b2be5ec1e7ec72fedb84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9473e310f8fe2a3c300e4630543fab8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9473e310f8fe2a3c300e4630543fab8f">&#9670;&nbsp;</a></span>glsl_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def sympy.printing.glsl.glsl_code </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>assign_to</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>settings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Converts an expr to a string of GLSL code

Parameters
==========

expr : Expr
    A SymPy expression to be converted.
assign_to : optional
    When given, the argument is used for naming the variable or variables
    to which the expression is assigned. Can be a string, ``Symbol``,
    ``MatrixSymbol`` or ``Indexed`` type object. In cases where ``expr``
    would be printed as an array, a list of string or ``Symbol`` objects
    can also be passed.

    This is helpful in case of line-wrapping, or for expressions that
    generate multi-line statements.  It can also be used to spread an array-like
    expression into multiple assignments.
use_operators: bool, optional
    If set to False, then *,/,+,- operators will be replaced with functions
    mul, add, and sub, which must be implemented by the user, e.g. for
    implementing non-standard rings or emulated quad/octal precision.
    [default=True]
glsl_types: bool, optional
    Set this argument to ``False`` in order to avoid using the ``vec`` and ``mat``
    types.  The printer will instead use arrays (or nested arrays).
    [default=True]
mat_nested: bool, optional
    GLSL version 4.3 and above support nested arrays (arrays of arrays).  Set this to ``True``
    to render matrices as nested arrays.
    [default=False]
mat_separator: str, optional
    By default, matrices are rendered with newlines using this separator,
    making them easier to read, but less compact.  By removing the newline
    this option can be used to make them more vertically compact.
    [default=',\n']
mat_transpose: bool, optional
    GLSL's matrix multiplication implementation assumes column-major indexing.
    By default, this printer ignores that convention. Setting this option to
    ``True`` transposes all matrix output.
    [default=False]
array_type: str, optional
    The GLSL array constructor type.
    [default='float']
precision : integer, optional
    The precision for numbers such as pi [default=15].
user_functions : dict, optional
    A dictionary where keys are ``FunctionClass`` instances and values are
    their string representations. Alternatively, the dictionary value can
    be a list of tuples i.e. [(argument_test, js_function_string)]. See
    below for examples.
human : bool, optional
    If True, the result is a single string that may contain some constant
    declarations for the number symbols. If False, the same information is
    returned in a tuple of (symbols_to_declare, not_supported_functions,
    code_text). [default=True].
contract: bool, optional
    If True, ``Indexed`` instances are assumed to obey tensor contraction
    rules and the corresponding nested loops over indices are generated.
    Setting contract=False will not generate loops, instead the user is
    responsible to provide values for the indices in the code.
    [default=True].

Examples
========

&gt;&gt;&gt; from sympy import glsl_code, symbols, Rational, sin, ceiling, Abs
&gt;&gt;&gt; x, tau = symbols("x, tau")
&gt;&gt;&gt; glsl_code((2*tau)**Rational(7, 2))
'8*sqrt(2)*pow(tau, 3.5)'
&gt;&gt;&gt; glsl_code(sin(x), assign_to="float y")
'float y = sin(x);'

Various GLSL types are supported:
&gt;&gt;&gt; from sympy import Matrix, glsl_code
&gt;&gt;&gt; glsl_code(Matrix([1,2,3]))
'vec3(1, 2, 3)'

&gt;&gt;&gt; glsl_code(Matrix([[1, 2],[3, 4]]))
'mat2(1, 2, 3, 4)'

Pass ``mat_transpose = True`` to switch to column-major indexing:
&gt;&gt;&gt; glsl_code(Matrix([[1, 2],[3, 4]]), mat_transpose = True)
'mat2(1, 3, 2, 4)'

By default, larger matrices get collapsed into float arrays:
&gt;&gt;&gt; print(glsl_code( Matrix([[1,2,3,4,5],[6,7,8,9,10]]) ))
float[10](
   1, 2, 3, 4,  5,
   6, 7, 8, 9, 10
) /* a 2x5 matrix */

The type of array constructor used to print GLSL arrays can be controlled
via the ``array_type`` parameter:
&gt;&gt;&gt; glsl_code(Matrix([1,2,3,4,5]), array_type='int')
'int[5](1, 2, 3, 4, 5)'

Passing a list of strings or ``symbols`` to the ``assign_to`` parameter will yield
a multi-line assignment for each item in an array-like expression:
&gt;&gt;&gt; x_struct_members = symbols('x.a x.b x.c x.d')
&gt;&gt;&gt; print(glsl_code(Matrix([1,2,3,4]), assign_to=x_struct_members))
x.a = 1;
x.b = 2;
x.c = 3;
x.d = 4;

This could be useful in cases where it's desirable to modify members of a
GLSL ``Struct``.  It could also be used to spread items from an array-like
expression into various miscellaneous assignments:
&gt;&gt;&gt; misc_assignments = ('x[0]', 'x[1]', 'float y', 'float z')
&gt;&gt;&gt; print(glsl_code(Matrix([1,2,3,4]), assign_to=misc_assignments))
x[0] = 1;
x[1] = 2;
float y = 3;
float z = 4;

Passing ``mat_nested = True`` instead prints out nested float arrays, which are
supported in GLSL 4.3 and above.
&gt;&gt;&gt; mat = Matrix([
... [ 0,  1,  2],
... [ 3,  4,  5],
... [ 6,  7,  8],
... [ 9, 10, 11],
... [12, 13, 14]])
&gt;&gt;&gt; print(glsl_code( mat, mat_nested = True ))
float[5][3](
   float[]( 0,  1,  2),
   float[]( 3,  4,  5),
   float[]( 6,  7,  8),
   float[]( 9, 10, 11),
   float[](12, 13, 14)
)



Custom printing can be defined for certain types by passing a dictionary of
"type" : "function" to the ``user_functions`` kwarg. Alternatively, the
dictionary value can be a list of tuples i.e. [(argument_test,
js_function_string)].

&gt;&gt;&gt; custom_functions = {
...   "ceiling": "CEIL",
...   "Abs": [(lambda x: not x.is_integer, "fabs"),
...           (lambda x: x.is_integer, "ABS")]
... }
&gt;&gt;&gt; glsl_code(Abs(x) + ceiling(x), user_functions=custom_functions)
'fabs(x) + CEIL(x)'

If further control is needed, addition, subtraction, multiplication and
division operators can be replaced with ``add``, ``sub``, and ``mul``
functions.  This is done by passing ``use_operators = False``:

&gt;&gt;&gt; x,y,z = symbols('x,y,z')
&gt;&gt;&gt; glsl_code(x*(y+z), use_operators = False)
'mul(x, add(y, z))'
&gt;&gt;&gt; glsl_code(x*(y+z*(x-y)**z), use_operators = False)
'mul(x, add(y, mul(z, pow(sub(x, y), z))))'

``Piecewise`` expressions are converted into conditionals. If an
``assign_to`` variable is provided an if statement is created, otherwise
the ternary operator is used. Note that if the ``Piecewise`` lacks a
default term, represented by ``(expr, True)`` then an error will be thrown.
This is to prevent generating an expression that may not evaluate to
anything.

&gt;&gt;&gt; from sympy import Piecewise
&gt;&gt;&gt; expr = Piecewise((x + 1, x &gt; 0), (x, True))
&gt;&gt;&gt; print(glsl_code(expr, tau))
if (x &gt; 0) {
   tau = x + 1;
}
else {
   tau = x;
}

Support for loops is provided through ``Indexed`` types. With
``contract=True`` these expressions will be turned into loops, whereas
``contract=False`` will just print the assignment expression that should be
looped over:

&gt;&gt;&gt; from sympy import Eq, IndexedBase, Idx
&gt;&gt;&gt; len_y = 5
&gt;&gt;&gt; y = IndexedBase('y', shape=(len_y,))
&gt;&gt;&gt; t = IndexedBase('t', shape=(len_y,))
&gt;&gt;&gt; Dy = IndexedBase('Dy', shape=(len_y-1,))
&gt;&gt;&gt; i = Idx('i', len_y-1)
&gt;&gt;&gt; e=Eq(Dy[i], (y[i+1]-y[i])/(t[i+1]-t[i]))
&gt;&gt;&gt; glsl_code(e.rhs, assign_to=e.lhs, contract=False)
'Dy[i] = (y[i + 1] - y[i])/(t[i + 1] - t[i]);'

&gt;&gt;&gt; from sympy import Matrix, MatrixSymbol
&gt;&gt;&gt; mat = Matrix([x**2, Piecewise((x + 1, x &gt; 0), (x, True)), sin(x)])
&gt;&gt;&gt; A = MatrixSymbol('A', 3, 1)
&gt;&gt;&gt; print(glsl_code(mat, A))
A[0][0] = pow(x, 2.0);
if (x &gt; 0) {
   A[1][0] = x + 1;
}
else {
   A[1][0] = x;
}
A[2][0] = sin(x);
</pre> 
</div>
</div>
<a id="a5a3844c4feaaae7ed9568bd5196f7983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a3844c4feaaae7ed9568bd5196f7983">&#9670;&nbsp;</a></span>print_glsl()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def sympy.printing.glsl.print_glsl </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>expr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**&#160;</td>
          <td class="paramname"><em>settings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Prints the GLSL representation of the given expression.

   See GLSLPrinter init function for settings.
</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a866b39145b2b2be5ec1e7ec72fedb84c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a866b39145b2b2be5ec1e7ec72fedb84c">&#9670;&nbsp;</a></span>known_functions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dictionary sympy.printing.glsl.known_functions</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;=  {</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    <span class="stringliteral">&#39;Abs&#39;</span>: <span class="stringliteral">&#39;abs&#39;</span>,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    <span class="stringliteral">&#39;sin&#39;</span>: <span class="stringliteral">&#39;sin&#39;</span>,</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    <span class="stringliteral">&#39;cos&#39;</span>: <span class="stringliteral">&#39;cos&#39;</span>,</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    <span class="stringliteral">&#39;tan&#39;</span>: <span class="stringliteral">&#39;tan&#39;</span>,</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    <span class="stringliteral">&#39;acos&#39;</span>: <span class="stringliteral">&#39;acos&#39;</span>,</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    <span class="stringliteral">&#39;asin&#39;</span>: <span class="stringliteral">&#39;asin&#39;</span>,</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="stringliteral">&#39;atan&#39;</span>: <span class="stringliteral">&#39;atan&#39;</span>,</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    <span class="stringliteral">&#39;atan2&#39;</span>: <span class="stringliteral">&#39;atan&#39;</span>,</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    <span class="stringliteral">&#39;ceiling&#39;</span>: <span class="stringliteral">&#39;ceil&#39;</span>,</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;    <span class="stringliteral">&#39;floor&#39;</span>: <span class="stringliteral">&#39;floor&#39;</span>,</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    <span class="stringliteral">&#39;sign&#39;</span>: <span class="stringliteral">&#39;sign&#39;</span>,</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    <span class="stringliteral">&#39;exp&#39;</span>: <span class="stringliteral">&#39;exp&#39;</span>,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    <span class="stringliteral">&#39;log&#39;</span>: <span class="stringliteral">&#39;log&#39;</span>,</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="stringliteral">&#39;add&#39;</span>: <span class="stringliteral">&#39;add&#39;</span>,</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    <span class="stringliteral">&#39;sub&#39;</span>: <span class="stringliteral">&#39;sub&#39;</span>,</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    <span class="stringliteral">&#39;mul&#39;</span>: <span class="stringliteral">&#39;mul&#39;</span>,</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    <span class="stringliteral">&#39;pow&#39;</span>: <span class="stringliteral">&#39;pow&#39;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
