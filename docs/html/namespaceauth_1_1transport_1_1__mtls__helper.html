<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: auth.transport._mtls_helper Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceauth.html">auth</a></li><li class="navelem"><a class="el" href="namespaceauth_1_1transport.html">transport</a></li><li class="navelem"><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html">_mtls_helper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">auth.transport._mtls_helper Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9c4c0d23343a893ad4cac9bf463bc7ea"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#a9c4c0d23343a893ad4cac9bf463bc7ea">get_client_ssl_credentials</a> (generate_encrypted_key=False, context_aware_metadata_path=<a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#a38d5970beb0bdce4f7c9661e957857c0">CONTEXT_AWARE_METADATA_PATH</a>, certificate_config_path=<a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#afff88da6ee708c272182489b35825acf">CERTIFICATE_CONFIGURATION_DEFAULT_PATH</a>)</td></tr>
<tr class="separator:a9c4c0d23343a893ad4cac9bf463bc7ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4da2a96641034392808f0ba7bfb371d8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#a4da2a96641034392808f0ba7bfb371d8">get_client_cert_and_key</a> (client_cert_callback=None)</td></tr>
<tr class="separator:a4da2a96641034392808f0ba7bfb371d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56b9822279ec380546be25fa8e6571ba"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#a56b9822279ec380546be25fa8e6571ba">decrypt_private_key</a> (key, passphrase)</td></tr>
<tr class="separator:a56b9822279ec380546be25fa8e6571ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a38d5970beb0bdce4f7c9661e957857c0"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#a38d5970beb0bdce4f7c9661e957857c0">CONTEXT_AWARE_METADATA_PATH</a> = &quot;~/.secureConnect/context_aware_metadata.json&quot;</td></tr>
<tr class="separator:a38d5970beb0bdce4f7c9661e957857c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff88da6ee708c272182489b35825acf"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#afff88da6ee708c272182489b35825acf">CERTIFICATE_CONFIGURATION_DEFAULT_PATH</a> = &quot;~/.config/gcloud/certificate_config.json&quot;</td></tr>
<tr class="separator:afff88da6ee708c272182489b35825acf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a56b9822279ec380546be25fa8e6571ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56b9822279ec380546be25fa8e6571ba">&#9670;&nbsp;</a></span>decrypt_private_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def auth.transport._mtls_helper.decrypt_private_key </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>passphrase</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">A helper function to decrypt the private key with the given passphrase.
google-auth library doesn't support passphrase protected private key for
mutual TLS channel. This helper function can be used to decrypt the
passphrase protected private key in order to estalish mutual TLS channel.

For example, if you have a function which produces client cert, passphrase
protected private key and passphrase, you can convert it to a client cert
callback function accepted by google-auth::

    from google.auth.transport import _mtls_helper

    def your_client_cert_function():
        return cert, encrypted_key, passphrase

    # callback accepted by google-auth for mutual TLS channel.
    def client_cert_callback():
        cert, encrypted_key, passphrase = your_client_cert_function()
        decrypted_key = _mtls_helper.decrypt_private_key(encrypted_key,
            passphrase)
        return cert, decrypted_key

Args:
    key (bytes): The private key bytes in PEM format.
    passphrase (bytes): The passphrase bytes.

Returns:
    bytes: The decrypted private key in PEM format.

Raises:
    ImportError: If pyOpenSSL is not installed.
    OpenSSL.crypto.Error: If there is any problem decrypting the private key.
</pre> 
</div>
</div>
<a id="a4da2a96641034392808f0ba7bfb371d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4da2a96641034392808f0ba7bfb371d8">&#9670;&nbsp;</a></span>get_client_cert_and_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def auth.transport._mtls_helper.get_client_cert_and_key </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>client_cert_callback</em> = <code>None</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the client side certificate and private key. The function first
tries to get certificate and key from client_cert_callback; if the callback
is None or doesn't provide certificate and key, the function tries application
default SSL credentials.

Args:
    client_cert_callback (Optional[Callable[[], (bytes, bytes)]]): An
        optional callback which returns client certificate bytes and private
        key bytes both in PEM format.

Returns:
    Tuple[bool, bytes, bytes]:
        A boolean indicating if cert and key are obtained, the cert bytes
        and key bytes both in PEM format.

Raises:
    google.auth.exceptions.ClientCertError: if problems occurs when getting
        the cert and key.
</pre> 
</div>
</div>
<a id="a9c4c0d23343a893ad4cac9bf463bc7ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c4c0d23343a893ad4cac9bf463bc7ea">&#9670;&nbsp;</a></span>get_client_ssl_credentials()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def auth.transport._mtls_helper.get_client_ssl_credentials </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>generate_encrypted_key</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>context_aware_metadata_path</em> = <code><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#a38d5970beb0bdce4f7c9661e957857c0">CONTEXT_AWARE_METADATA_PATH</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>certificate_config_path</em> = <code><a class="el" href="namespaceauth_1_1transport_1_1__mtls__helper.html#afff88da6ee708c272182489b35825acf">CERTIFICATE_CONFIGURATION_DEFAULT_PATH</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Returns the client side certificate, private key and passphrase.

We look for certificates and keys with the following order of priority:
    1. Certificate and key specified by certificate_config.json.
           Currently, only X.509 workload certificates are supported.
    2. Certificate and key specified by context aware metadata (i.e. SecureConnect).

Args:
    generate_encrypted_key (bool): If set to True, encrypted private key
        and passphrase will be generated; otherwise, unencrypted private key
        will be generated and passphrase will be None. This option only
        affects keys obtained via context_aware_metadata.json.
    context_aware_metadata_path (str): The context_aware_metadata.json file path.
    certificate_config_path (str): The certificate_config.json file path.

Returns:
    Tuple[bool, bytes, bytes, bytes]:
        A boolean indicating if cert, key and passphrase are obtained, the
        cert bytes and key bytes both in PEM format, and passphrase bytes.

Raises:
    google.auth.exceptions.ClientCertError: if problems occurs when getting
        the cert, key and passphrase.
</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="afff88da6ee708c272182489b35825acf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afff88da6ee708c272182489b35825acf">&#9670;&nbsp;</a></span>CERTIFICATE_CONFIGURATION_DEFAULT_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string auth.transport._mtls_helper.CERTIFICATE_CONFIGURATION_DEFAULT_PATH = &quot;~/.config/gcloud/certificate_config.json&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a38d5970beb0bdce4f7c9661e957857c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38d5970beb0bdce4f7c9661e957857c0">&#9670;&nbsp;</a></span>CONTEXT_AWARE_METADATA_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string auth.transport._mtls_helper.CONTEXT_AWARE_METADATA_PATH = &quot;~/.secureConnect/context_aware_metadata.json&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
