<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: sympy.logic.algorithms.lra_theory Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesympy.html">sympy</a></li><li class="navelem"><a class="el" href="namespacesympy_1_1logic.html">logic</a></li><li class="navelem"><a class="el" href="namespacesympy_1_1logic_1_1algorithms.html">algorithms</a></li><li class="navelem"><a class="el" href="namespacesympy_1_1logic_1_1algorithms_1_1lra__theory.html">lra_theory</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">sympy.logic.algorithms.lra_theory Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsympy_1_1logic_1_1algorithms_1_1lra__theory_1_1UnhandledInput.html">UnhandledInput</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsympy_1_1logic_1_1algorithms_1_1lra__theory_1_1LRASolver.html">LRASolver</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsympy_1_1logic_1_1algorithms_1_1lra__theory_1_1Boundary.html">Boundary</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsympy_1_1logic_1_1algorithms_1_1lra__theory_1_1LRARational.html">LRARational</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsympy_1_1logic_1_1algorithms_1_1lra__theory_1_1LRAVariable.html">LRAVariable</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad334758c67688cc76fdee1c4cf4fafa1"><td class="memItemLeft" align="right" valign="top">dictionary&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesympy_1_1logic_1_1algorithms_1_1lra__theory.html#ad334758c67688cc76fdee1c4cf4fafa1">ALLOWED_PRED</a> = {Q.eq, Q.gt, Q.lt, Q.le, Q.ge}</td></tr>
<tr class="separator:ad334758c67688cc76fdee1c4cf4fafa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3211c515af0f7e9562dffc895f587cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacesympy_1_1logic_1_1algorithms_1_1lra__theory.html#ad3211c515af0f7e9562dffc895f587cd">HANDLE_NEGATION</a> = True</td></tr>
<tr class="separator:ad3211c515af0f7e9562dffc895f587cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Implements "A Fast Linear-Arithmetic Solver for DPLL(T)"

The LRASolver class defined in this file can be used
in conjunction with a SAT solver to check the
satisfiability of formulas involving inequalities.

Here's an example of how that would work:

    Suppose you want to check the satisfiability of
    the following formula:

    &gt;&gt;&gt; from sympy.core.relational import Eq
    &gt;&gt;&gt; from sympy.abc import x, y
    &gt;&gt;&gt; f = ((x &gt; 0) | (x &lt; 0)) &amp; (Eq(x, 0) | Eq(y, 1)) &amp; (~Eq(y, 1) | Eq(1, 2))

    First a preprocessing step should be done on f. During preprocessing,
    f should be checked for any predicates such as `Q.prime` that can't be
    handled. Also unequality like `~Eq(y, 1)` should be split.

    I should mention that the paper says to split both equalities and
    unequality, but this implementation only requires that unequality
    be split.

    &gt;&gt;&gt; f = ((x &gt; 0) | (x &lt; 0)) &amp; (Eq(x, 0) | Eq(y, 1)) &amp; ((y &lt; 1) | (y &gt; 1) | Eq(1, 2))

    Then an LRASolver instance needs to be initialized with this formula.

    &gt;&gt;&gt; from sympy.assumptions.cnf import CNF, EncodedCNF
    &gt;&gt;&gt; from sympy.assumptions.ask import Q
    &gt;&gt;&gt; from sympy.logic.algorithms.lra_theory import LRASolver
    &gt;&gt;&gt; cnf = CNF.from_prop(f)
    &gt;&gt;&gt; enc = EncodedCNF()
    &gt;&gt;&gt; enc.add_from_cnf(cnf)
    &gt;&gt;&gt; lra, conflicts = LRASolver.from_encoded_cnf(enc)

    Any immediate one-lital conflicts clauses will be detected here.
    In this example, `~Eq(1, 2)` is one such conflict clause. We'll
    want to add it to `f` so that the SAT solver is forced to
    assign Eq(1, 2) to False.

    &gt;&gt;&gt; f = f &amp; ~Eq(1, 2)

    Now that the one-literal conflict clauses have been added
    and an lra object has been initialized, we can pass `f`
    to a SAT solver. The SAT solver will give us a satisfying
    assignment such as:

    (1 = 2): False
    (y = 1): True
    (y &lt; 1): True
    (y &gt; 1): True
    (x = 0): True
    (x &lt; 0): True
    (x &gt; 0): True

    Next you would pass this assignment to the LRASolver
    which will be able to determine that this particular
    assignment is satisfiable or not.

    Note that since EncodedCNF is inherently non-deterministic,
    the int each predicate is encoded as is not consistent. As a
    result, the code bellow likely does not reflect the assignment
    given above.

    &gt;&gt;&gt; lra.assert_lit(-1) #doctest: +SKIP
    &gt;&gt;&gt; lra.assert_lit(2) #doctest: +SKIP
    &gt;&gt;&gt; lra.assert_lit(3) #doctest: +SKIP
    &gt;&gt;&gt; lra.assert_lit(4) #doctest: +SKIP
    &gt;&gt;&gt; lra.assert_lit(5) #doctest: +SKIP
    &gt;&gt;&gt; lra.assert_lit(6) #doctest: +SKIP
    &gt;&gt;&gt; lra.assert_lit(7) #doctest: +SKIP
    &gt;&gt;&gt; is_sat, conflict_or_assignment = lra.check()

    As the particular assignment suggested is not satisfiable,
    the LRASolver will return unsat and a conflict clause when
    given that assignment. The conflict clause will always be
    minimal, but there can be multiple minimal conflict clauses.
    One possible conflict clause could be `~(x &lt; 0) | ~(x &gt; 0)`.

    We would then add whatever conflict clause is given to
    `f` to prevent the SAT solver from coming up with an
    assignment with the same conflicting literals. In this case,
    the conflict clause `~(x &lt; 0) | ~(x &gt; 0)` would prevent
    any assignment where both (x &lt; 0) and (x &gt; 0) were both
    true.

    The SAT solver would then find another assignment
    and we would check that assignment with the LRASolver
    and so on. Eventually either a satisfying assignment
    that the SAT solver and LRASolver agreed on would be found
    or enough conflict clauses would be added so that the
    boolean formula was unsatisfiable.


This implementation is based on [1]_, which includes a
detailed explanation of the algorithm and pseudocode
for the most important functions.

[1]_ also explains how backtracking and theory propagation
could be implemented to speed up the current implementation,
but these are not currently implemented.

TODO:
 - Handle non-rational real numbers
 - Handle positive and negative infinity
 - Implement backtracking and theory proposition
 - Simplify matrix by removing unused variables using Gaussian elimination

References
==========

.. [1] Dutertre, B., de Moura, L.:
       A Fast Linear-Arithmetic Solver for DPLL(T)
       https://link.springer.com/chapter/10.1007/11817963_11
</pre> </div><h2 class="groupheader">Variable Documentation</h2>
<a id="ad334758c67688cc76fdee1c4cf4fafa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad334758c67688cc76fdee1c4cf4fafa1">&#9670;&nbsp;</a></span>ALLOWED_PRED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dictionary sympy.logic.algorithms.lra_theory.ALLOWED_PRED = {Q.eq, Q.gt, Q.lt, Q.le, Q.ge}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad3211c515af0f7e9562dffc895f587cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3211c515af0f7e9562dffc895f587cd">&#9670;&nbsp;</a></span>HANDLE_NEGATION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool sympy.logic.algorithms.lra_theory.HANDLE_NEGATION = True</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
