<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: onnxruntime.tools.mobile_helpers.usability_checker Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceonnxruntime.html">onnxruntime</a></li><li class="navelem"><a class="el" href="namespaceonnxruntime_1_1tools.html">tools</a></li><li class="navelem"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers.html">mobile_helpers</a></li><li class="navelem"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html">usability_checker</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">onnxruntime.tools.mobile_helpers.usability_checker Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker_1_1__SupportedOpsChecker.html">_SupportedOpsChecker</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker_1_1PartitioningInfo.html">PartitioningInfo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8607a234e5b2f67721b8fa899f33eb52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker_1_1PartitioningInfo.html">PartitioningInfo</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#a8607a234e5b2f67721b8fa899f33eb52">check_partitioning</a> (onnx.GraphProto main_graph, <a class="el" href="classonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker_1_1__SupportedOpsChecker.html">_SupportedOpsChecker</a> supported_ops_checker, bool require_fixed_input_sizes, int max_rank=999)</td></tr>
<tr class="separator:a8607a234e5b2f67721b8fa899f33eb52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a347b032503c7148e77163b39f7375130"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#a347b032503c7148e77163b39f7375130">check_nnapi_partitions</a> (model, bool require_fixed_input_sizes)</td></tr>
<tr class="separator:a347b032503c7148e77163b39f7375130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5589ce60be015cb8bb25dd3186f6bf55"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#a5589ce60be015cb8bb25dd3186f6bf55">check_coreml_partitions</a> (onnx.ModelProto model, bool require_fixed_input_sizes, str config_filename)</td></tr>
<tr class="separator:a5589ce60be015cb8bb25dd3186f6bf55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5c3363308f6235f6d6cf6a490ef40e5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#aa5c3363308f6235f6d6cf6a490ef40e5">check_shapes</a> (onnx.GraphProto graph, logging.Logger|None logger=None)</td></tr>
<tr class="separator:aa5c3363308f6235f6d6cf6a490ef40e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c9d2712c8aba915911ebd3d73c10e18"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#a2c9d2712c8aba915911ebd3d73c10e18">checker</a> (pathlib.Path model_path, logging.Logger logger)</td></tr>
<tr class="separator:a2c9d2712c8aba915911ebd3d73c10e18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99ab9073194ceeb76e031a87e011bc1e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#a99ab9073194ceeb76e031a87e011bc1e">analyze_model</a> (pathlib.Path model_path, bool skip_optimize=False, logging.Logger|None logger=None)</td></tr>
<tr class="separator:a99ab9073194ceeb76e031a87e011bc1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba4c486bdc5c2cf02a530702cbc25400"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#aba4c486bdc5c2cf02a530702cbc25400">parse_args</a> ()</td></tr>
<tr class="separator:aba4c486bdc5c2cf02a530702cbc25400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4c32349d23d714ede59e205bec8702"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker.html#a1d4c32349d23d714ede59e205bec8702">run_analyze_model</a> ()</td></tr>
<tr class="separator:a1d4c32349d23d714ede59e205bec8702"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a99ab9073194ceeb76e031a87e011bc1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99ab9073194ceeb76e031a87e011bc1e">&#9670;&nbsp;</a></span>analyze_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def onnxruntime.tools.mobile_helpers.usability_checker.analyze_model </td>
          <td>(</td>
          <td class="paramtype">pathlib.Path&#160;</td>
          <td class="paramname"><em>model_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &#160;</td>
          <td class="paramname"><em>skip_optimize</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logging.Logger | None &#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Analyze the provided model to determine if it's likely to work well with the NNAPI or CoreML Execution Providers
:param model_path: Model to analyze.
:param skip_optimize: Skip optimizing to BASIC level before checking. When exporting to ORT format we will do this
                      optimization..
:param logger: Logger for output
:return: True if either the NNAPI or CoreML Execution Providers may work well with this model.
</pre> 
</div>
</div>
<a id="a5589ce60be015cb8bb25dd3186f6bf55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5589ce60be015cb8bb25dd3186f6bf55">&#9670;&nbsp;</a></span>check_coreml_partitions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def onnxruntime.tools.mobile_helpers.usability_checker.check_coreml_partitions </td>
          <td>(</td>
          <td class="paramtype">onnx.ModelProto&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>require_fixed_input_sizes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>config_filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a347b032503c7148e77163b39f7375130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a347b032503c7148e77163b39f7375130">&#9670;&nbsp;</a></span>check_nnapi_partitions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def onnxruntime.tools.mobile_helpers.usability_checker.check_nnapi_partitions </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>require_fixed_input_sizes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8607a234e5b2f67721b8fa899f33eb52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8607a234e5b2f67721b8fa899f33eb52">&#9670;&nbsp;</a></span>check_partitioning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker_1_1PartitioningInfo.html">PartitioningInfo</a> onnxruntime.tools.mobile_helpers.usability_checker.check_partitioning </td>
          <td>(</td>
          <td class="paramtype">onnx.GraphProto&#160;</td>
          <td class="paramname"><em>main_graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classonnxruntime_1_1tools_1_1mobile__helpers_1_1usability__checker_1_1__SupportedOpsChecker.html">_SupportedOpsChecker</a>&#160;</td>
          <td class="paramname"><em>supported_ops_checker</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>require_fixed_input_sizes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &#160;</td>
          <td class="paramname"><em>max_rank</em> = <code>999</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Estimate the partitions the graph will be split into for nodes that is_node_supported_fn returns true for.

The check on whether a node is supported is purely based on the operator type. Additional limitations
(e.g. NNAPI EP only supports 2D Conv) are not checked, so partitions may not be 100% accurate. The limitations
for operators in the partitions are printed so the user can manually check.
:param main_graph: Graph to process
:param supported_ops_checker: Checker with info on supported ops.
:param require_fixed_input_sizes: If True, require that the inputs to a potentially supported node are fixed size
                                  tensors for it to be considered as supported. This requires
                                  onnx.shape_inference.infer_shapes to have been run on the model to populate the
                                  shape information.
                                  If False, shapes are ignored during the check.
:param max_rank: Set if EP has a limitation on the rank of tensors it supports.
:return PartitioningInfo instance with details
</pre> 
</div>
</div>
<a id="aa5c3363308f6235f6d6cf6a490ef40e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c3363308f6235f6d6cf6a490ef40e5">&#9670;&nbsp;</a></span>check_shapes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def onnxruntime.tools.mobile_helpers.usability_checker.check_shapes </td>
          <td>(</td>
          <td class="paramtype">onnx.GraphProto&#160;</td>
          <td class="paramname"><em>graph</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logging.Logger | None &#160;</td>
          <td class="paramname"><em>logger</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check the shapes of graph inputs, values and graph outputs to determine if they have static or dynamic sizes.
NNAPI does not support dynamically sized values. CoreML does, but it will most likely cost performance.
:param graph: Graph to check. If shape inferencing has been run the checks on values will be meaningful.
:param logger: Optional logger for diagnostic information.
:return: Tuple of List of inputs with dynamic shapes, Number of dynamic values found
</pre> 
</div>
</div>
<a id="a2c9d2712c8aba915911ebd3d73c10e18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c9d2712c8aba915911ebd3d73c10e18">&#9670;&nbsp;</a></span>checker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def onnxruntime.tools.mobile_helpers.usability_checker.checker </td>
          <td>(</td>
          <td class="paramtype">pathlib.Path&#160;</td>
          <td class="paramname"><em>model_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logging.Logger&#160;</td>
          <td class="paramname"><em>logger</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aba4c486bdc5c2cf02a530702cbc25400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba4c486bdc5c2cf02a530702cbc25400">&#9670;&nbsp;</a></span>parse_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def onnxruntime.tools.mobile_helpers.usability_checker.parse_args </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1d4c32349d23d714ede59e205bec8702"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d4c32349d23d714ede59e205bec8702">&#9670;&nbsp;</a></span>run_analyze_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def onnxruntime.tools.mobile_helpers.usability_checker.run_analyze_model </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
