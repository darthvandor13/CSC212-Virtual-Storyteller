<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: zstandard.backend_cffi.ZstdCompressionObj Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacezstandard.html">zstandard</a></li><li class="navelem"><a class="el" href="namespacezstandard_1_1backend__cffi.html">backend_cffi</a></li><li class="navelem"><a class="el" href="classzstandard_1_1backend__cffi_1_1ZstdCompressionObj.html">ZstdCompressionObj</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classzstandard_1_1backend__cffi_1_1ZstdCompressionObj-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">zstandard.backend_cffi.ZstdCompressionObj Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for zstandard.backend_cffi.ZstdCompressionObj:</div>
<div class="dyncontent">
<div class="center"><img src="classzstandard_1_1backend__cffi_1_1ZstdCompressionObj__inherit__graph.png" border="0" usemap="#azstandard_8backend__cffi_8ZstdCompressionObj_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for zstandard.backend_cffi.ZstdCompressionObj:</div>
<div class="dyncontent">
<div class="center"><img src="classzstandard_1_1backend__cffi_1_1ZstdCompressionObj__coll__graph.png" border="0" usemap="#azstandard_8backend__cffi_8ZstdCompressionObj_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a30c4af33212e2e5460827f15277c1fdf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzstandard_1_1backend__cffi_1_1ZstdCompressionObj.html#a30c4af33212e2e5460827f15277c1fdf">__init__</a> (self, compressor, write_size=<a class="el" href="namespacezstandard_1_1backend__cffi.html#a9c853b81f911a950f328d50cee41a3ba">COMPRESSION_RECOMMENDED_OUTPUT_SIZE</a>)</td></tr>
<tr class="separator:a30c4af33212e2e5460827f15277c1fdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add3089e6a7785c2c4d660c5b4a22147e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzstandard_1_1backend__cffi_1_1ZstdCompressionObj.html#add3089e6a7785c2c4d660c5b4a22147e">compress</a> (self, data)</td></tr>
<tr class="separator:add3089e6a7785c2c4d660c5b4a22147e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb6dbb1cbef364ac3066019b4000bf2c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classzstandard_1_1backend__cffi_1_1ZstdCompressionObj.html#aeb6dbb1cbef364ac3066019b4000bf2c">flush</a> (self, flush_mode=<a class="el" href="namespacezstandard_1_1backend__cffi.html#ae9366234d1841bc68648e5cbcbeab364">COMPRESSOBJ_FLUSH_FINISH</a>)</td></tr>
<tr class="separator:aeb6dbb1cbef364ac3066019b4000bf2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">A compressor conforming to the API in Python's standard library.

This type implements an API similar to compression types in Python's
standard library such as ``zlib.compressobj`` and ``bz2.BZ2Compressor``.
This enables existing code targeting the standard library API to swap
in this type to achieve zstd compression.

.. important::

   The design of this API is not ideal for optimal performance.

   The reason performance is not optimal is because the API is limited to
   returning a single buffer holding compressed data. When compressing
   data, we don't know how much data will be emitted. So in order to
   capture all this data in a single buffer, we need to perform buffer
   reallocations and/or extra memory copies. This can add significant
   overhead depending on the size or nature of the compressed data how
   much your application calls this type.

   If performance is critical, consider an API like
   :py:meth:`ZstdCompressor.stream_reader`,
   :py:meth:`ZstdCompressor.stream_writer`,
   :py:meth:`ZstdCompressor.chunker`, or
   :py:meth:`ZstdCompressor.read_to_iter`, which result in less overhead
   managing buffers.

Instances are obtained by calling :py:meth:`ZstdCompressor.compressobj`.

Here is how this API should be used:

&gt;&gt;&gt; cctx = zstandard.ZstdCompressor()
&gt;&gt;&gt; cobj = cctx.compressobj()
&gt;&gt;&gt; data = cobj.compress(b"raw input 0")
&gt;&gt;&gt; data = cobj.compress(b"raw input 1")
&gt;&gt;&gt; data = cobj.flush()

Or to flush blocks:

&gt;&gt;&gt; cctx.zstandard.ZstdCompressor()
&gt;&gt;&gt; cobj = cctx.compressobj()
&gt;&gt;&gt; data = cobj.compress(b"chunk in first block")
&gt;&gt;&gt; data = cobj.flush(zstandard.COMPRESSOBJ_FLUSH_BLOCK)
&gt;&gt;&gt; data = cobj.compress(b"chunk in second block")
&gt;&gt;&gt; data = cobj.flush()

For best performance results, keep input chunks under 256KB. This avoids
extra allocations for a large output object.

It is possible to declare the input size of the data that will be fed
into the compressor:

&gt;&gt;&gt; cctx = zstandard.ZstdCompressor()
&gt;&gt;&gt; cobj = cctx.compressobj(size=6)
&gt;&gt;&gt; data = cobj.compress(b"foobar")
&gt;&gt;&gt; data = cobj.flush()
</pre> </div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a30c4af33212e2e5460827f15277c1fdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c4af33212e2e5460827f15277c1fdf">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zstandard.backend_cffi.ZstdCompressionObj.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>compressor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>write_size</em> = <code><a class="el" href="namespacezstandard_1_1backend__cffi.html#a9c853b81f911a950f328d50cee41a3ba">COMPRESSION_RECOMMENDED_OUTPUT_SIZE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="add3089e6a7785c2c4d660c5b4a22147e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add3089e6a7785c2c4d660c5b4a22147e">&#9670;&nbsp;</a></span>compress()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zstandard.backend_cffi.ZstdCompressionObj.compress </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Send data to the compressor.

This method receives bytes to feed to the compressor and returns
bytes constituting zstd compressed data.

The zstd compressor accumulates bytes and the returned bytes may be
substantially smaller or larger than the size of the input data on
any given call. The returned value may be the empty byte string
(``b""``).

:param data:
   Data to write to the compressor.
:return:
   Compressed data.
</pre> 
</div>
</div>
<a id="aeb6dbb1cbef364ac3066019b4000bf2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb6dbb1cbef364ac3066019b4000bf2c">&#9670;&nbsp;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def zstandard.backend_cffi.ZstdCompressionObj.flush </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>flush_mode</em> = <code><a class="el" href="namespacezstandard_1_1backend__cffi.html#ae9366234d1841bc68648e5cbcbeab364">COMPRESSOBJ_FLUSH_FINISH</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Emit data accumulated in the compressor that hasn't been outputted yet.

The ``flush_mode`` argument controls how to end the stream.

``zstandard.COMPRESSOBJ_FLUSH_FINISH`` (the default) ends the
compression stream and finishes a zstd frame. Once this type of flush
is performed, ``compress()`` and ``flush()`` can no longer be called.
This type of flush **must** be called to end the compression context. If
not called, the emitted data may be incomplete and may not be readable
by a decompressor.

``zstandard.COMPRESSOBJ_FLUSH_BLOCK`` will flush a zstd block. This
ensures that all data fed to this instance will have been omitted and
can be decoded by a decompressor. Flushes of this type can be performed
multiple times. The next call to ``compress()`` will begin a new zstd
block.

:param flush_mode:
   How to flush the zstd compressor.
:return:
   Compressed data.
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>py3_env/lib/python3.10/site-packages/zstandard/<a class="el" href="backend__cffi_8py.html">backend_cffi.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
