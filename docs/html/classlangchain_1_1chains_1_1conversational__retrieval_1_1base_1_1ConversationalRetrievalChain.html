<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: langchain.chains.conversational_retrieval.base.ConversationalRetrievalChain Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelangchain.html">langchain</a></li><li class="navelem"><a class="el" href="namespacelangchain_1_1chains.html">chains</a></li><li class="navelem"><a class="el" href="namespacelangchain_1_1chains_1_1conversational__retrieval.html">conversational_retrieval</a></li><li class="navelem"><a class="el" href="namespacelangchain_1_1chains_1_1conversational__retrieval_1_1base.html">base</a></li><li class="navelem"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1ConversationalRetrievalChain.html">ConversationalRetrievalChain</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1ConversationalRetrievalChain-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">langchain.chains.conversational_retrieval.base.ConversationalRetrievalChain Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for langchain.chains.conversational_retrieval.base.ConversationalRetrievalChain:</div>
<div class="dyncontent">
<div class="center"><img src="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1ConversationalRetrievalChain__inherit__graph.png" border="0" usemap="#alangchain_8chains_8conversational__retrieval_8base_8ConversationalRetrievalChain_inherit__map" alt="Inheritance graph"/></div>
<!-- MAP 0 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for langchain.chains.conversational_retrieval.base.ConversationalRetrievalChain:</div>
<div class="dyncontent">
<div class="center"><img src="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1ConversationalRetrievalChain__coll__graph.png" border="0" usemap="#alangchain_8chains_8conversational__retrieval_8base_8ConversationalRetrievalChain_coll__map" alt="Collaboration graph"/></div>
<!-- MAP 1 -->
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8420e7a90462ec5f8c6f28f6c4d793c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html">BaseConversationalRetrievalChain</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1ConversationalRetrievalChain.html#a8420e7a90462ec5f8c6f28f6c4d793c2">from_llm</a> (cls, BaseLanguageModel llm, <a class="el" href="classlangchain__core_1_1retrievers_1_1BaseRetriever.html">BaseRetriever</a> retriever, BasePromptTemplate condense_question_prompt=CONDENSE_QUESTION_PROMPT, <a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a1d079b64f930fde100a07e3c157d15b1">str</a> chain_type=&quot;stuff&quot;, bool verbose=False, Optional[BaseLanguageModel] condense_question_llm=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[Dict] combine_docs_chain_kwargs=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a> callbacks=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, **Any kwargs)</td></tr>
<tr class="separator:a8420e7a90462ec5f8c6f28f6c4d793c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html">langchain.chains.conversational_retrieval.base.BaseConversationalRetrievalChain</a></td></tr>
<tr class="memitem:a5b260a0cf4f4d98637a1d432a1b91545 inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">List[<a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a1d079b64f930fde100a07e3c157d15b1">str</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a5b260a0cf4f4d98637a1d432a1b91545">input_keys</a> (self)</td></tr>
<tr class="separator:a5b260a0cf4f4d98637a1d432a1b91545 inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc3c399e57d800fd5e1a0660af24950 inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">Type[<a class="el" href="classpydantic_1_1main_1_1BaseModel.html">BaseModel</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a5cc3c399e57d800fd5e1a0660af24950">get_input_schema</a> (self, Optional[RunnableConfig] config=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>)</td></tr>
<tr class="separator:a5cc3c399e57d800fd5e1a0660af24950 inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ff2273433c0386ca10e43fcb38ba27 inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">List[<a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a1d079b64f930fde100a07e3c157d15b1">str</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a97ff2273433c0386ca10e43fcb38ba27">output_keys</a> (self)</td></tr>
<tr class="separator:a97ff2273433c0386ca10e43fcb38ba27 inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4335f5c0994e504cae79cfd82d7ad9d inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#ab4335f5c0994e504cae79cfd82d7ad9d">save</a> (self, Union[Path, <a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a1d079b64f930fde100a07e3c157d15b1">str</a>] file_path)</td></tr>
<tr class="separator:ab4335f5c0994e504cae79cfd82d7ad9d inherit pub_methods_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlangchain_1_1chains_1_1base_1_1Chain')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html">langchain.chains.base.Chain</a></td></tr>
<tr class="memitem:a1b1cb0133507f19227d24b659291c83b inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Type[<a class="el" href="classpydantic_1_1main_1_1BaseModel.html">BaseModel</a>]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a1b1cb0133507f19227d24b659291c83b">get_output_schema</a> (self, Optional[RunnableConfig] config=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>)</td></tr>
<tr class="separator:a1b1cb0133507f19227d24b659291c83b inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a717ae09f13436a44a0341e51855c440b inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a717ae09f13436a44a0341e51855c440b">invoke</a> (self, Dict[str, Any] input, Optional[RunnableConfig] config=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, **Any kwargs)</td></tr>
<tr class="separator:a717ae09f13436a44a0341e51855c440b inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a105d89781d5d556c0102d851acb2b8 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a8a105d89781d5d556c0102d851acb2b8">ainvoke</a> (self, Dict[str, Any] input, Optional[RunnableConfig] config=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, **Any kwargs)</td></tr>
<tr class="separator:a8a105d89781d5d556c0102d851acb2b8 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43aead49aa0623a6b0639fbbcd24e50e inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a43aead49aa0623a6b0639fbbcd24e50e">raise_callback_manager_deprecation</a> (cls, Dict values)</td></tr>
<tr class="separator:a43aead49aa0623a6b0639fbbcd24e50e inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1fedc6c82e9c7dd5385dc727face906 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#af1fedc6c82e9c7dd5385dc727face906">set_verbose</a> (cls, Optional[<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a>] verbose)</td></tr>
<tr class="separator:af1fedc6c82e9c7dd5385dc727face906 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1a6480c675ef33be47bbe4831ad4e9 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a1a1a6480c675ef33be47bbe4831ad4e9">__call__</a> (self, Union[Dict[str, Any], Any] inputs, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a> return_only_outputs=False, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a> callbacks=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, *Optional[List[str]] tags=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[Dict[str, Any]] metadata=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[str] run_name=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a> include_run_info=False)</td></tr>
<tr class="separator:a1a1a6480c675ef33be47bbe4831ad4e9 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc2f705951af97b9b5aaa19abd8fc260 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, Any]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#acc2f705951af97b9b5aaa19abd8fc260">acall</a> (self, Union[Dict[str, Any], Any] inputs, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a> return_only_outputs=False, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a> callbacks=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, *Optional[List[str]] tags=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[Dict[str, Any]] metadata=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[str] run_name=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a> include_run_info=False)</td></tr>
<tr class="separator:acc2f705951af97b9b5aaa19abd8fc260 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07a811ed353454a2fcc3d69b3c9822a inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#af07a811ed353454a2fcc3d69b3c9822a">prep_outputs</a> (self, Dict[str, str] inputs, Dict[str, str] outputs, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a> return_only_outputs=False)</td></tr>
<tr class="separator:af07a811ed353454a2fcc3d69b3c9822a inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee5ef987079520972b064f22aa0f6cd inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a3ee5ef987079520972b064f22aa0f6cd">aprep_outputs</a> (self, Dict[str, str] inputs, Dict[str, str] outputs, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a> return_only_outputs=False)</td></tr>
<tr class="separator:a3ee5ef987079520972b064f22aa0f6cd inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676c2cecab6dfae56747c799d405bfa8 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a676c2cecab6dfae56747c799d405bfa8">prep_inputs</a> (self, Union[Dict[str, Any], Any] inputs)</td></tr>
<tr class="separator:a676c2cecab6dfae56747c799d405bfa8 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5450a7635295cc0105282af3d614ef inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict[str, str]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a6a5450a7635295cc0105282af3d614ef">aprep_inputs</a> (self, Union[Dict[str, Any], Any] inputs)</td></tr>
<tr class="separator:a6a5450a7635295cc0105282af3d614ef inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a46b2acf51a8134f29c18fc4aa4d982 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a3a46b2acf51a8134f29c18fc4aa4d982">run</a> (self, *Any args, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a> callbacks=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[List[str]] tags=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[Dict[str, Any]] metadata=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, **Any kwargs)</td></tr>
<tr class="separator:a3a46b2acf51a8134f29c18fc4aa4d982 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c0c56d4d37cd5dd8f04deebe7cb580 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Any&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a53c0c56d4d37cd5dd8f04deebe7cb580">arun</a> (self, *Any args, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a> callbacks=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[List[str]] tags=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, Optional[Dict[str, Any]] metadata=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>, **Any kwargs)</td></tr>
<tr class="separator:a53c0c56d4d37cd5dd8f04deebe7cb580 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e5ab111bd569d56b13ff93d44cce07 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">Dict&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a77e5ab111bd569d56b13ff93d44cce07">dict</a> (self, **Any kwargs)</td></tr>
<tr class="separator:a77e5ab111bd569d56b13ff93d44cce07 inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6982c7a6101259b21a03ee7246483a inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">List[Dict[str, str]]&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a7f6982c7a6101259b21a03ee7246483a">apply</a> (self, List[Dict[str, Any]] input_list, <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a> callbacks=<a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a>)</td></tr>
<tr class="separator:a7f6982c7a6101259b21a03ee7246483a inherit pub_methods_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html">langchain.chains.conversational_retrieval.base.BaseConversationalRetrievalChain</a></td></tr>
<tr class="memitem:a1d079b64f930fde100a07e3c157d15b1 inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a1d079b64f930fde100a07e3c157d15b1">str</a></td></tr>
<tr class="separator:a1d079b64f930fde100a07e3c157d15b1 inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f09bfbf11ae80f5c023837d1f7465b inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a30f09bfbf11ae80f5c023837d1f7465b">bool</a></td></tr>
<tr class="separator:a30f09bfbf11ae80f5c023837d1f7465b inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944d1f08a77c36a4bae7fa3f3e1480ee inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a944d1f08a77c36a4bae7fa3f3e1480ee">model_config</a></td></tr>
<tr class="separator:a944d1f08a77c36a4bae7fa3f3e1480ee inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7608216977c6f44db4cab13f3638da8f inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a7608216977c6f44db4cab13f3638da8f">since</a></td></tr>
<tr class="separator:a7608216977c6f44db4cab13f3638da8f inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae336e04a12be35c3214f133d6eb6787f inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">tuple&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#ae336e04a12be35c3214f133d6eb6787f">alternative</a></td></tr>
<tr class="separator:ae336e04a12be35c3214f133d6eb6787f inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c34a87fa09852fc555c319e54ca48ac inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a7c34a87fa09852fc555c319e54ca48ac">removal</a> = &quot;1.0&quot;,</td></tr>
<tr class="separator:a7c34a87fa09852fc555c319e54ca48ac inherit pub_static_attribs_classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html">langchain.chains.base.Chain</a></td></tr>
<tr class="memitem:a947d1be674b47323ee25e03f493f4ef6 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a></td></tr>
<tr class="separator:a947d1be674b47323ee25e03f493f4ef6 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a006c2e755ec9414d2936cf5bd8271916 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a006c2e755ec9414d2936cf5bd8271916">default</a></td></tr>
<tr class="separator:a006c2e755ec9414d2936cf5bd8271916 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0331e47ada69e3acd1c4db192b7d794 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a></td></tr>
<tr class="separator:ae0331e47ada69e3acd1c4db192b7d794 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9862197ef6a83dddfa4ac2e8575f776a inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a9862197ef6a83dddfa4ac2e8575f776a">exclude</a></td></tr>
<tr class="separator:a9862197ef6a83dddfa4ac2e8575f776a inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1111ff3ad4102e672c21b2ede675fc7 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae1111ff3ad4102e672c21b2ede675fc7">bool</a></td></tr>
<tr class="separator:ae1111ff3ad4102e672c21b2ede675fc7 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e8e17346ea9cecaec632d6cdd910e44 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a6e8e17346ea9cecaec632d6cdd910e44">default_factory</a></td></tr>
<tr class="separator:a6e8e17346ea9cecaec632d6cdd910e44 inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93392d455aa7b47ab93e6d985cca1feb inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a93392d455aa7b47ab93e6d985cca1feb">model_config</a></td></tr>
<tr class="separator:a93392d455aa7b47ab93e6d985cca1feb inherit pub_static_attribs_classlangchain_1_1chains_1_1base_1_1Chain"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Chain for having a conversation based on retrieved documents.

This class is deprecated. See below for an example implementation using
`create_retrieval_chain`. Additional walkthroughs can be found at
https://python.langchain.com/docs/use_cases/question_answering/chat_history

    .. code-block:: python

        from langchain.chains import (
            create_history_aware_retriever,
            create_retrieval_chain,
        )
        from langchain.chains.combine_documents import create_stuff_documents_chain
        from langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder
        from langchain_openai import ChatOpenAI


        retriever = ...  # Your retriever

        llm = ChatOpenAI()

        # Contextualize question
        contextualize_q_system_prompt = (
            "Given a chat history and the latest user question "
            "which might reference context in the chat history, "
            "formulate a standalone question which can be understood "
            "without the chat history. Do NOT answer the question, just "
            "reformulate it if needed and otherwise return it as is."
        )
        contextualize_q_prompt = ChatPromptTemplate.from_messages(
            [
                ("system", contextualize_q_system_prompt),
                MessagesPlaceholder("chat_history"),
                ("human", "{input}"),
            ]
        )
        history_aware_retriever = create_history_aware_retriever(
            llm, retriever, contextualize_q_prompt
        )

        # Answer question
        qa_system_prompt = (
            "You are an assistant for question-answering tasks. Use "
            "the following pieces of retrieved context to answer the "
            "question. If you don't know the answer, just say that you "
            "don't know. Use three sentences maximum and keep the answer "
            "concise."
            "\n\n"
            "{context}"
        )
        qa_prompt = ChatPromptTemplate.from_messages(
            [
                ("system", qa_system_prompt),
                MessagesPlaceholder("chat_history"),
                ("human", "{input}"),
            ]
        )
        # Below we use create_stuff_documents_chain to feed all retrieved context
        # into the LLM. Note that we can also use StuffDocumentsChain and other
        # instances of BaseCombineDocumentsChain.
        question_answer_chain = create_stuff_documents_chain(llm, qa_prompt)
        rag_chain = create_retrieval_chain(
            history_aware_retriever, question_answer_chain
        )

        # Usage:
        chat_history = []  # Collect chat history here (a sequence of messages)
        rag_chain.invoke({"input": query, "chat_history": chat_history})

This chain takes in chat history (a list of messages) and new questions,
and then returns an answer to that question.
The algorithm for this chain consists of three parts:

1. Use the chat history and the new question to create a "standalone question".
This is done so that this question can be passed into the retrieval step to fetch
relevant documents. If only the new question was passed in, then relevant context
may be lacking. If the whole conversation was passed into retrieval, there may
be unnecessary information there that would distract from retrieval.

2. This new question is passed to the retriever and relevant documents are
returned.

3. The retrieved documents are passed to an LLM along with either the new question
(default behavior) or the original question and chat history to generate a final
response.

Example:
    .. code-block:: python

        from langchain.chains import (
            StuffDocumentsChain, LLMChain, ConversationalRetrievalChain
        )
        from langchain_core.prompts import PromptTemplate
        from langchain_community.llms import OpenAI

        combine_docs_chain = StuffDocumentsChain(...)
        vectorstore = ...
        retriever = vectorstore.as_retriever()

        # This controls how the standalone question is generated.
        # Should take `chat_history` and `question` as input variables.
        template = (
            "Combine the chat history and follow up question into "
            "a standalone question. Chat History: {chat_history}"
            "Follow up question: {question}"
        )
        prompt = PromptTemplate.from_template(template)
        llm = OpenAI()
        question_generator_chain = LLMChain(llm=llm, prompt=prompt)
        chain = ConversationalRetrievalChain(
            combine_docs_chain=combine_docs_chain,
            retriever=retriever,
            question_generator=question_generator_chain,
        )
</pre> </div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a8420e7a90462ec5f8c6f28f6c4d793c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8420e7a90462ec5f8c6f28f6c4d793c2">&#9670;&nbsp;</a></span>from_llm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> <a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html">BaseConversationalRetrievalChain</a> langchain.chains.conversational_retrieval.base.ConversationalRetrievalChain.from_llm </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseLanguageModel&#160;</td>
          <td class="paramname"><em>llm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlangchain__core_1_1retrievers_1_1BaseRetriever.html">BaseRetriever</a>&#160;</td>
          <td class="paramname"><em>retriever</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BasePromptTemplate &#160;</td>
          <td class="paramname"><em>condense_question_prompt</em> = <code>CONDENSE_QUESTION_PROMPT</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a1d079b64f930fde100a07e3c157d15b1">str</a> &#160;</td>
          <td class="paramname"><em>chain_type</em> = <code>&quot;stuff&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlangchain_1_1chains_1_1conversational__retrieval_1_1base_1_1BaseConversationalRetrievalChain.html#a30f09bfbf11ae80f5c023837d1f7465b">bool</a> &#160;</td>
          <td class="paramname"><em>verbose</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[BaseLanguageModel] &#160;</td>
          <td class="paramname"><em>condense_question_llm</em> = <code><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Optional[Dict] &#160;</td>
          <td class="paramname"><em>combine_docs_chain_kwargs</em> = <code><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#a947d1be674b47323ee25e03f493f4ef6">Callbacks</a> &#160;</td>
          <td class="paramname"><em>callbacks</em> = <code><a class="el" href="classlangchain_1_1chains_1_1base_1_1Chain.html#ae0331e47ada69e3acd1c4db192b7d794">None</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">**Any&#160;</td>
          <td class="paramname"><em>kwargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Convenience method to load chain from LLM and retriever.

This provides some logic to create the `question_generator` chain
as well as the combine_docs_chain.

Args:
    llm: The default language model to use at every part of this chain
        (eg in both the question generation and the answering)
    retriever: The retriever to use to fetch relevant documents from.
    condense_question_prompt: The prompt to use to condense the chat history
        and new question into a standalone question.
    chain_type: The chain type to use to create the combine_docs_chain, will
        be sent to `load_qa_chain`.
    verbose: Verbosity flag for logging to stdout.
    condense_question_llm: The language model to use for condensing the chat
        history and new question into a standalone question. If none is
        provided, will default to `llm`.
    combine_docs_chain_kwargs: Parameters to pass as kwargs to `load_qa_chain`
        when constructing the combine_docs_chain.
    callbacks: Callbacks to pass to all subchains.
    kwargs: Additional parameters to pass when initializing
        ConversationalRetrievalChain
</pre> 
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>py3_env/lib/python3.10/site-packages/langchain/chains/conversational_retrieval/<a class="el" href="py3__env_2lib_2python3_810_2site-packages_2langchain_2chains_2conversational__retrieval_2base_8py.html">base.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
