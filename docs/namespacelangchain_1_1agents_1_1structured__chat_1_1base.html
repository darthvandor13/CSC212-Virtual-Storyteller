<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NAO Virtual Storyteller: langchain.agents.structured_chat.base Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NAO Virtual Storyteller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacelangchain.html">langchain</a></li><li class="navelem"><a class="el" href="namespacelangchain_1_1agents.html">agents</a></li><li class="navelem"><a class="el" href="namespacelangchain_1_1agents_1_1structured__chat.html">structured_chat</a></li><li class="navelem"><a class="el" href="namespacelangchain_1_1agents_1_1structured__chat_1_1base.html">base</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">langchain.agents.structured_chat.base Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlangchain_1_1agents_1_1structured__chat_1_1base_1_1StructuredChatAgent.html">StructuredChatAgent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a334414fe968afd9c52e5fc40af2c7c61"><td class="memItemLeft" align="right" valign="top">Runnable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangchain_1_1agents_1_1structured__chat_1_1base.html#a334414fe968afd9c52e5fc40af2c7c61">create_structured_chat_agent</a> (BaseLanguageModel llm, Sequence[BaseTool] tools, <a class="el" href="classlangchain__core_1_1prompts_1_1chat_1_1ChatPromptTemplate.html">ChatPromptTemplate</a> prompt, ToolsRenderer tools_renderer=render_text_description_and_args, *Union[bool, List[str]] stop_sequence=True)</td></tr>
<tr class="separator:a334414fe968afd9c52e5fc40af2c7c61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad674448766b592e2b037a532e30fce54"><td class="memItemLeft" align="right" valign="top">string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacelangchain_1_1agents_1_1structured__chat_1_1base.html#ad674448766b592e2b037a532e30fce54">HUMAN_MESSAGE_TEMPLATE</a> = &quot;{input}\n\n{agent_scratchpad}&quot;</td></tr>
<tr class="separator:ad674448766b592e2b037a532e30fce54"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a334414fe968afd9c52e5fc40af2c7c61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a334414fe968afd9c52e5fc40af2c7c61">&#9670;&nbsp;</a></span>create_structured_chat_agent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> Runnable langchain.agents.structured_chat.base.create_structured_chat_agent </td>
          <td>(</td>
          <td class="paramtype">BaseLanguageModel&#160;</td>
          <td class="paramname"><em>llm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Sequence[BaseTool]&#160;</td>
          <td class="paramname"><em>tools</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlangchain__core_1_1prompts_1_1chat_1_1ChatPromptTemplate.html">ChatPromptTemplate</a>&#160;</td>
          <td class="paramname"><em>prompt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ToolsRenderer &#160;</td>
          <td class="paramname"><em>tools_renderer</em> = <code>render_text_description_and_args</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">*Union[bool, List[str]] &#160;</td>
          <td class="paramname"><em>stop_sequence</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create an agent aimed at supporting tools with multiple inputs.

Args:
    llm: LLM to use as the agent.
    tools: Tools this agent has access to.
    prompt: The prompt to use. See Prompt section below for more.
    stop_sequence: bool or list of str.
        If True, adds a stop token of "Observation:" to avoid hallucinates.
        If False, does not add a stop token.
        If a list of str, uses the provided list as the stop tokens.

        Default is True. You may to set this to False if the LLM you are using
        does not support stop sequences.
    tools_renderer: This controls how the tools are converted into a string and
        then passed into the LLM. Default is `render_text_description`.

Returns:
    A Runnable sequence representing an agent. It takes as input all the same input
    variables as the prompt passed in does. It returns as output either an
    AgentAction or AgentFinish.

Examples:

    .. code-block:: python

        from langchain import hub
        from langchain_community.chat_models import ChatOpenAI
        from langchain.agents import AgentExecutor, create_structured_chat_agent

        prompt = hub.pull("hwchase17/structured-chat-agent")
        model = ChatOpenAI()
        tools = ...

        agent = create_structured_chat_agent(model, tools, prompt)
        agent_executor = AgentExecutor(agent=agent, tools=tools)

        agent_executor.invoke({"input": "hi"})

        # Using with chat history
        from langchain_core.messages import AIMessage, HumanMessage
        agent_executor.invoke(
            {
                "input": "what's my name?",
                "chat_history": [
                    HumanMessage(content="hi! my name is bob"),
                    AIMessage(content="Hello Bob! How can I assist you today?"),
                ],
            }
        )

Prompt:

    The prompt must have input keys:
        * `tools`: contains descriptions and arguments for each tool.
        * `tool_names`: contains all tool names.
        * `agent_scratchpad`: contains previous agent actions and tool outputs as a string.

    Here's an example:

    .. code-block:: python

        from langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder

        system = '''Respond to the human as helpfully and accurately as possible. You have access to the following tools:

        {tools}

        Use a json blob to specify a tool by providing an action key (tool name) and an action_input key (tool input).

        Valid "action" values: "Final Answer" or {tool_names}

        Provide only ONE action per $JSON_BLOB, as shown:

        ```
        {{
          "action": $TOOL_NAME,
          "action_input": $INPUT
        }}
        ```

        Follow this format:

        Question: input question to answer
        Thought: consider previous and subsequent steps
        Action:
        ```
        $JSON_BLOB
        ```
        Observation: action result
        ... (repeat Thought/Action/Observation N times)
        Thought: I know what to respond
        Action:
        ```
        {{
          "action": "Final Answer",
          "action_input": "Final response to human"
        }}

        Begin! Reminder to ALWAYS respond with a valid json blob of a single action. Use tools if necessary. Respond directly if appropriate. Format is Action:```$JSON_BLOB```then Observation'''

        human = '''{input}

        {agent_scratchpad}

        (reminder to respond in a JSON blob no matter what)'''

        prompt = ChatPromptTemplate.from_messages(
            [
                ("system", system),
                MessagesPlaceholder("chat_history", optional=True),
                ("human", human),
            ]
        )
</pre> 
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad674448766b592e2b037a532e30fce54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad674448766b592e2b037a532e30fce54">&#9670;&nbsp;</a></span>HUMAN_MESSAGE_TEMPLATE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">string langchain.agents.structured_chat.base.HUMAN_MESSAGE_TEMPLATE = &quot;{input}\n\n{agent_scratchpad}&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
